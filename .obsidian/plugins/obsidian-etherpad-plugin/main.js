/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/underscore/underscore.js
var require_underscore = __commonJS({
  "node_modules/underscore/underscore.js"(exports, module2) {
    (function() {
      var root = this;
      var previousUnderscore = root._;
      var breaker = {};
      var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;
      var slice = ArrayProto.slice, unshift = ArrayProto.unshift, toString = ObjProto.toString, hasOwnProperty = ObjProto.hasOwnProperty;
      var nativeForEach = ArrayProto.forEach, nativeMap = ArrayProto.map, nativeReduce = ArrayProto.reduce, nativeReduceRight = ArrayProto.reduceRight, nativeFilter = ArrayProto.filter, nativeEvery = ArrayProto.every, nativeSome = ArrayProto.some, nativeIndexOf = ArrayProto.indexOf, nativeLastIndexOf = ArrayProto.lastIndexOf, nativeIsArray = Array.isArray, nativeKeys = Object.keys, nativeBind = FuncProto.bind;
      var _ = function(obj) {
        return new wrapper(obj);
      };
      if (typeof exports !== "undefined") {
        if (typeof module2 !== "undefined" && module2.exports) {
          exports = module2.exports = _;
        }
        exports._ = _;
      } else {
        root["_"] = _;
      }
      _.VERSION = "1.3.3";
      var each = _.each = _.forEach = function(obj, iterator, context) {
        if (obj == null)
          return;
        if (nativeForEach && obj.forEach === nativeForEach) {
          obj.forEach(iterator, context);
        } else if (obj.length === +obj.length) {
          for (var i = 0, l = obj.length; i < l; i++) {
            if (i in obj && iterator.call(context, obj[i], i, obj) === breaker)
              return;
          }
        } else {
          for (var key in obj) {
            if (_.has(obj, key)) {
              if (iterator.call(context, obj[key], key, obj) === breaker)
                return;
            }
          }
        }
      };
      _.map = _.collect = function(obj, iterator, context) {
        var results = [];
        if (obj == null)
          return results;
        if (nativeMap && obj.map === nativeMap)
          return obj.map(iterator, context);
        each(obj, function(value, index, list) {
          results[results.length] = iterator.call(context, value, index, list);
        });
        if (obj.length === +obj.length)
          results.length = obj.length;
        return results;
      };
      _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {
        var initial = arguments.length > 2;
        if (obj == null)
          obj = [];
        if (nativeReduce && obj.reduce === nativeReduce) {
          if (context)
            iterator = _.bind(iterator, context);
          return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);
        }
        each(obj, function(value, index, list) {
          if (!initial) {
            memo = value;
            initial = true;
          } else {
            memo = iterator.call(context, memo, value, index, list);
          }
        });
        if (!initial)
          throw new TypeError("Reduce of empty array with no initial value");
        return memo;
      };
      _.reduceRight = _.foldr = function(obj, iterator, memo, context) {
        var initial = arguments.length > 2;
        if (obj == null)
          obj = [];
        if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {
          if (context)
            iterator = _.bind(iterator, context);
          return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);
        }
        var reversed = _.toArray(obj).reverse();
        if (context && !initial)
          iterator = _.bind(iterator, context);
        return initial ? _.reduce(reversed, iterator, memo, context) : _.reduce(reversed, iterator);
      };
      _.find = _.detect = function(obj, iterator, context) {
        var result2;
        any(obj, function(value, index, list) {
          if (iterator.call(context, value, index, list)) {
            result2 = value;
            return true;
          }
        });
        return result2;
      };
      _.filter = _.select = function(obj, iterator, context) {
        var results = [];
        if (obj == null)
          return results;
        if (nativeFilter && obj.filter === nativeFilter)
          return obj.filter(iterator, context);
        each(obj, function(value, index, list) {
          if (iterator.call(context, value, index, list))
            results[results.length] = value;
        });
        return results;
      };
      _.reject = function(obj, iterator, context) {
        var results = [];
        if (obj == null)
          return results;
        each(obj, function(value, index, list) {
          if (!iterator.call(context, value, index, list))
            results[results.length] = value;
        });
        return results;
      };
      _.every = _.all = function(obj, iterator, context) {
        var result2 = true;
        if (obj == null)
          return result2;
        if (nativeEvery && obj.every === nativeEvery)
          return obj.every(iterator, context);
        each(obj, function(value, index, list) {
          if (!(result2 = result2 && iterator.call(context, value, index, list)))
            return breaker;
        });
        return !!result2;
      };
      var any = _.some = _.any = function(obj, iterator, context) {
        iterator || (iterator = _.identity);
        var result2 = false;
        if (obj == null)
          return result2;
        if (nativeSome && obj.some === nativeSome)
          return obj.some(iterator, context);
        each(obj, function(value, index, list) {
          if (result2 || (result2 = iterator.call(context, value, index, list)))
            return breaker;
        });
        return !!result2;
      };
      _.include = _.contains = function(obj, target) {
        var found = false;
        if (obj == null)
          return found;
        if (nativeIndexOf && obj.indexOf === nativeIndexOf)
          return obj.indexOf(target) != -1;
        found = any(obj, function(value) {
          return value === target;
        });
        return found;
      };
      _.invoke = function(obj, method) {
        var args = slice.call(arguments, 2);
        return _.map(obj, function(value) {
          return (_.isFunction(method) ? method || value : value[method]).apply(value, args);
        });
      };
      _.pluck = function(obj, key) {
        return _.map(obj, function(value) {
          return value[key];
        });
      };
      _.max = function(obj, iterator, context) {
        if (!iterator && _.isArray(obj) && obj[0] === +obj[0])
          return Math.max.apply(Math, obj);
        if (!iterator && _.isEmpty(obj))
          return -Infinity;
        var result2 = { computed: -Infinity };
        each(obj, function(value, index, list) {
          var computed = iterator ? iterator.call(context, value, index, list) : value;
          computed >= result2.computed && (result2 = { value, computed });
        });
        return result2.value;
      };
      _.min = function(obj, iterator, context) {
        if (!iterator && _.isArray(obj) && obj[0] === +obj[0])
          return Math.min.apply(Math, obj);
        if (!iterator && _.isEmpty(obj))
          return Infinity;
        var result2 = { computed: Infinity };
        each(obj, function(value, index, list) {
          var computed = iterator ? iterator.call(context, value, index, list) : value;
          computed < result2.computed && (result2 = { value, computed });
        });
        return result2.value;
      };
      _.shuffle = function(obj) {
        var shuffled = [], rand;
        each(obj, function(value, index, list) {
          rand = Math.floor(Math.random() * (index + 1));
          shuffled[index] = shuffled[rand];
          shuffled[rand] = value;
        });
        return shuffled;
      };
      _.sortBy = function(obj, val, context) {
        var iterator = _.isFunction(val) ? val : function(obj2) {
          return obj2[val];
        };
        return _.pluck(_.map(obj, function(value, index, list) {
          return {
            value,
            criteria: iterator.call(context, value, index, list)
          };
        }).sort(function(left, right) {
          var a = left.criteria, b = right.criteria;
          if (a === void 0)
            return 1;
          if (b === void 0)
            return -1;
          return a < b ? -1 : a > b ? 1 : 0;
        }), "value");
      };
      _.groupBy = function(obj, val) {
        var result2 = {};
        var iterator = _.isFunction(val) ? val : function(obj2) {
          return obj2[val];
        };
        each(obj, function(value, index) {
          var key = iterator(value, index);
          (result2[key] || (result2[key] = [])).push(value);
        });
        return result2;
      };
      _.sortedIndex = function(array, obj, iterator) {
        iterator || (iterator = _.identity);
        var low = 0, high = array.length;
        while (low < high) {
          var mid = low + high >> 1;
          iterator(array[mid]) < iterator(obj) ? low = mid + 1 : high = mid;
        }
        return low;
      };
      _.toArray = function(obj) {
        if (!obj)
          return [];
        if (_.isArray(obj))
          return slice.call(obj);
        if (_.isArguments(obj))
          return slice.call(obj);
        if (obj.toArray && _.isFunction(obj.toArray))
          return obj.toArray();
        return _.values(obj);
      };
      _.size = function(obj) {
        return _.isArray(obj) ? obj.length : _.keys(obj).length;
      };
      _.first = _.head = _.take = function(array, n, guard) {
        return n != null && !guard ? slice.call(array, 0, n) : array[0];
      };
      _.initial = function(array, n, guard) {
        return slice.call(array, 0, array.length - (n == null || guard ? 1 : n));
      };
      _.last = function(array, n, guard) {
        if (n != null && !guard) {
          return slice.call(array, Math.max(array.length - n, 0));
        } else {
          return array[array.length - 1];
        }
      };
      _.rest = _.tail = function(array, index, guard) {
        return slice.call(array, index == null || guard ? 1 : index);
      };
      _.compact = function(array) {
        return _.filter(array, function(value) {
          return !!value;
        });
      };
      _.flatten = function(array, shallow) {
        return _.reduce(array, function(memo, value) {
          if (_.isArray(value))
            return memo.concat(shallow ? value : _.flatten(value));
          memo[memo.length] = value;
          return memo;
        }, []);
      };
      _.without = function(array) {
        return _.difference(array, slice.call(arguments, 1));
      };
      _.uniq = _.unique = function(array, isSorted, iterator) {
        var initial = iterator ? _.map(array, iterator) : array;
        var results = [];
        if (array.length < 3)
          isSorted = true;
        _.reduce(initial, function(memo, value, index) {
          if (isSorted ? _.last(memo) !== value || !memo.length : !_.include(memo, value)) {
            memo.push(value);
            results.push(array[index]);
          }
          return memo;
        }, []);
        return results;
      };
      _.union = function() {
        return _.uniq(_.flatten(arguments, true));
      };
      _.intersection = _.intersect = function(array) {
        var rest = slice.call(arguments, 1);
        return _.filter(_.uniq(array), function(item) {
          return _.every(rest, function(other) {
            return _.indexOf(other, item) >= 0;
          });
        });
      };
      _.difference = function(array) {
        var rest = _.flatten(slice.call(arguments, 1), true);
        return _.filter(array, function(value) {
          return !_.include(rest, value);
        });
      };
      _.zip = function() {
        var args = slice.call(arguments);
        var length = _.max(_.pluck(args, "length"));
        var results = new Array(length);
        for (var i = 0; i < length; i++)
          results[i] = _.pluck(args, "" + i);
        return results;
      };
      _.indexOf = function(array, item, isSorted) {
        if (array == null)
          return -1;
        var i, l;
        if (isSorted) {
          i = _.sortedIndex(array, item);
          return array[i] === item ? i : -1;
        }
        if (nativeIndexOf && array.indexOf === nativeIndexOf)
          return array.indexOf(item);
        for (i = 0, l = array.length; i < l; i++)
          if (i in array && array[i] === item)
            return i;
        return -1;
      };
      _.lastIndexOf = function(array, item) {
        if (array == null)
          return -1;
        if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf)
          return array.lastIndexOf(item);
        var i = array.length;
        while (i--)
          if (i in array && array[i] === item)
            return i;
        return -1;
      };
      _.range = function(start, stop, step) {
        if (arguments.length <= 1) {
          stop = start || 0;
          start = 0;
        }
        step = arguments[2] || 1;
        var len = Math.max(Math.ceil((stop - start) / step), 0);
        var idx = 0;
        var range = new Array(len);
        while (idx < len) {
          range[idx++] = start;
          start += step;
        }
        return range;
      };
      var ctor = function() {
      };
      _.bind = function bind(func, context) {
        var bound, args;
        if (func.bind === nativeBind && nativeBind)
          return nativeBind.apply(func, slice.call(arguments, 1));
        if (!_.isFunction(func))
          throw new TypeError();
        args = slice.call(arguments, 2);
        return bound = function() {
          if (!(this instanceof bound))
            return func.apply(context, args.concat(slice.call(arguments)));
          ctor.prototype = func.prototype;
          var self = new ctor();
          var result2 = func.apply(self, args.concat(slice.call(arguments)));
          if (Object(result2) === result2)
            return result2;
          return self;
        };
      };
      _.bindAll = function(obj) {
        var funcs = slice.call(arguments, 1);
        if (funcs.length == 0)
          funcs = _.functions(obj);
        each(funcs, function(f) {
          obj[f] = _.bind(obj[f], obj);
        });
        return obj;
      };
      _.memoize = function(func, hasher) {
        var memo = {};
        hasher || (hasher = _.identity);
        return function() {
          var key = hasher.apply(this, arguments);
          return _.has(memo, key) ? memo[key] : memo[key] = func.apply(this, arguments);
        };
      };
      _.delay = function(func, wait) {
        var args = slice.call(arguments, 2);
        return setTimeout(function() {
          return func.apply(null, args);
        }, wait);
      };
      _.defer = function(func) {
        return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
      };
      _.throttle = function(func, wait) {
        var context, args, timeout, throttling, more, result2;
        var whenDone = _.debounce(function() {
          more = throttling = false;
        }, wait);
        return function() {
          context = this;
          args = arguments;
          var later = function() {
            timeout = null;
            if (more)
              func.apply(context, args);
            whenDone();
          };
          if (!timeout)
            timeout = setTimeout(later, wait);
          if (throttling) {
            more = true;
          } else {
            result2 = func.apply(context, args);
          }
          whenDone();
          throttling = true;
          return result2;
        };
      };
      _.debounce = function(func, wait, immediate) {
        var timeout;
        return function() {
          var context = this, args = arguments;
          var later = function() {
            timeout = null;
            if (!immediate)
              func.apply(context, args);
          };
          if (immediate && !timeout)
            func.apply(context, args);
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      };
      _.once = function(func) {
        var ran = false, memo;
        return function() {
          if (ran)
            return memo;
          ran = true;
          return memo = func.apply(this, arguments);
        };
      };
      _.wrap = function(func, wrapper2) {
        return function() {
          var args = [func].concat(slice.call(arguments, 0));
          return wrapper2.apply(this, args);
        };
      };
      _.compose = function() {
        var funcs = arguments;
        return function() {
          var args = arguments;
          for (var i = funcs.length - 1; i >= 0; i--) {
            args = [funcs[i].apply(this, args)];
          }
          return args[0];
        };
      };
      _.after = function(times, func) {
        if (times <= 0)
          return func();
        return function() {
          if (--times < 1) {
            return func.apply(this, arguments);
          }
        };
      };
      _.keys = nativeKeys || function(obj) {
        if (obj !== Object(obj))
          throw new TypeError("Invalid object");
        var keys = [];
        for (var key in obj)
          if (_.has(obj, key))
            keys[keys.length] = key;
        return keys;
      };
      _.values = function(obj) {
        return _.map(obj, _.identity);
      };
      _.functions = _.methods = function(obj) {
        var names = [];
        for (var key in obj) {
          if (_.isFunction(obj[key]))
            names.push(key);
        }
        return names.sort();
      };
      _.extend = function(obj) {
        each(slice.call(arguments, 1), function(source) {
          for (var prop in source) {
            obj[prop] = source[prop];
          }
        });
        return obj;
      };
      _.pick = function(obj) {
        var result2 = {};
        each(_.flatten(slice.call(arguments, 1)), function(key) {
          if (key in obj)
            result2[key] = obj[key];
        });
        return result2;
      };
      _.defaults = function(obj) {
        each(slice.call(arguments, 1), function(source) {
          for (var prop in source) {
            if (obj[prop] == null)
              obj[prop] = source[prop];
          }
        });
        return obj;
      };
      _.clone = function(obj) {
        if (!_.isObject(obj))
          return obj;
        return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
      };
      _.tap = function(obj, interceptor) {
        interceptor(obj);
        return obj;
      };
      function eq(a, b, stack) {
        if (a === b)
          return a !== 0 || 1 / a == 1 / b;
        if (a == null || b == null)
          return a === b;
        if (a._chain)
          a = a._wrapped;
        if (b._chain)
          b = b._wrapped;
        if (a.isEqual && _.isFunction(a.isEqual))
          return a.isEqual(b);
        if (b.isEqual && _.isFunction(b.isEqual))
          return b.isEqual(a);
        var className = toString.call(a);
        if (className != toString.call(b))
          return false;
        switch (className) {
          case "[object String]":
            return a == String(b);
          case "[object Number]":
            return a != +a ? b != +b : a == 0 ? 1 / a == 1 / b : a == +b;
          case "[object Date]":
          case "[object Boolean]":
            return +a == +b;
          case "[object RegExp]":
            return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase;
        }
        if (typeof a != "object" || typeof b != "object")
          return false;
        var length = stack.length;
        while (length--) {
          if (stack[length] == a)
            return true;
        }
        stack.push(a);
        var size = 0, result2 = true;
        if (className == "[object Array]") {
          size = a.length;
          result2 = size == b.length;
          if (result2) {
            while (size--) {
              if (!(result2 = size in a == size in b && eq(a[size], b[size], stack)))
                break;
            }
          }
        } else {
          if ("constructor" in a != "constructor" in b || a.constructor != b.constructor)
            return false;
          for (var key in a) {
            if (_.has(a, key)) {
              size++;
              if (!(result2 = _.has(b, key) && eq(a[key], b[key], stack)))
                break;
            }
          }
          if (result2) {
            for (key in b) {
              if (_.has(b, key) && !size--)
                break;
            }
            result2 = !size;
          }
        }
        stack.pop();
        return result2;
      }
      _.isEqual = function(a, b) {
        return eq(a, b, []);
      };
      _.isEmpty = function(obj) {
        if (obj == null)
          return true;
        if (_.isArray(obj) || _.isString(obj))
          return obj.length === 0;
        for (var key in obj)
          if (_.has(obj, key))
            return false;
        return true;
      };
      _.isElement = function(obj) {
        return !!(obj && obj.nodeType == 1);
      };
      _.isArray = nativeIsArray || function(obj) {
        return toString.call(obj) == "[object Array]";
      };
      _.isObject = function(obj) {
        return obj === Object(obj);
      };
      _.isArguments = function(obj) {
        return toString.call(obj) == "[object Arguments]";
      };
      if (!_.isArguments(arguments)) {
        _.isArguments = function(obj) {
          return !!(obj && _.has(obj, "callee"));
        };
      }
      _.isFunction = function(obj) {
        return toString.call(obj) == "[object Function]";
      };
      _.isString = function(obj) {
        return toString.call(obj) == "[object String]";
      };
      _.isNumber = function(obj) {
        return toString.call(obj) == "[object Number]";
      };
      _.isFinite = function(obj) {
        return _.isNumber(obj) && isFinite(obj);
      };
      _.isNaN = function(obj) {
        return obj !== obj;
      };
      _.isBoolean = function(obj) {
        return obj === true || obj === false || toString.call(obj) == "[object Boolean]";
      };
      _.isDate = function(obj) {
        return toString.call(obj) == "[object Date]";
      };
      _.isRegExp = function(obj) {
        return toString.call(obj) == "[object RegExp]";
      };
      _.isNull = function(obj) {
        return obj === null;
      };
      _.isUndefined = function(obj) {
        return obj === void 0;
      };
      _.has = function(obj, key) {
        return hasOwnProperty.call(obj, key);
      };
      _.noConflict = function() {
        root._ = previousUnderscore;
        return this;
      };
      _.identity = function(value) {
        return value;
      };
      _.times = function(n, iterator, context) {
        for (var i = 0; i < n; i++)
          iterator.call(context, i);
      };
      _.escape = function(string) {
        return ("" + string).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;");
      };
      _.result = function(object, property) {
        if (object == null)
          return null;
        var value = object[property];
        return _.isFunction(value) ? value.call(object) : value;
      };
      _.mixin = function(obj) {
        each(_.functions(obj), function(name) {
          addToWrapper(name, _[name] = obj[name]);
        });
      };
      var idCounter = 0;
      _.uniqueId = function(prefix) {
        var id = idCounter++;
        return prefix ? prefix + id : id;
      };
      _.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
      };
      var noMatch = /.^/;
      var escapes = {
        "\\": "\\",
        "'": "'",
        "r": "\r",
        "n": "\n",
        "t": "	",
        "u2028": "\u2028",
        "u2029": "\u2029"
      };
      for (var p in escapes)
        escapes[escapes[p]] = p;
      var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;
      var unescaper = /\\(\\|'|r|n|t|u2028|u2029)/g;
      var unescape = function(code) {
        return code.replace(unescaper, function(match, escape) {
          return escapes[escape];
        });
      };
      _.template = function(text, data, settings) {
        settings = _.defaults(settings || {}, _.templateSettings);
        var source = "__p+='" + text.replace(escaper, function(match) {
          return "\\" + escapes[match];
        }).replace(settings.escape || noMatch, function(match, code) {
          return "'+\n_.escape(" + unescape(code) + ")+\n'";
        }).replace(settings.interpolate || noMatch, function(match, code) {
          return "'+\n(" + unescape(code) + ")+\n'";
        }).replace(settings.evaluate || noMatch, function(match, code) {
          return "';\n" + unescape(code) + "\n;__p+='";
        }) + "';\n";
        if (!settings.variable)
          source = "with(obj||{}){\n" + source + "}\n";
        source = "var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n" + source + "return __p;\n";
        var render = new Function(settings.variable || "obj", "_", source);
        if (data)
          return render(data, _);
        var template = function(data2) {
          return render.call(this, data2, _);
        };
        template.source = "function(" + (settings.variable || "obj") + "){\n" + source + "}";
        return template;
      };
      _.chain = function(obj) {
        return _(obj).chain();
      };
      var wrapper = function(obj) {
        this._wrapped = obj;
      };
      _.prototype = wrapper.prototype;
      var result = function(obj, chain) {
        return chain ? _(obj).chain() : obj;
      };
      var addToWrapper = function(name, func) {
        wrapper.prototype[name] = function() {
          var args = slice.call(arguments);
          unshift.call(args, this._wrapped);
          return result(func.apply(_, args), this._chain);
        };
      };
      _.mixin(_);
      each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(name) {
        var method = ArrayProto[name];
        wrapper.prototype[name] = function() {
          var wrapped = this._wrapped;
          method.apply(wrapped, arguments);
          var length = wrapped.length;
          if ((name == "shift" || name == "splice") && length === 0)
            delete wrapped[0];
          return result(wrapped, this._chain);
        };
      });
      each(["concat", "join", "slice"], function(name) {
        var method = ArrayProto[name];
        wrapper.prototype[name] = function() {
          return result(method.apply(this._wrapped, arguments), this._chain);
        };
      });
      wrapper.prototype.chain = function() {
        this._chain = true;
        return this;
      };
      wrapper.prototype.value = function() {
        return this._wrapped;
      };
    }).call(exports);
  }
});

// node_modules/etherpad-lite-client/main.js
var require_main = __commonJS({
  "node_modules/etherpad-lite-client/main.js"(exports) {
    (function() {
      var _, http, https, querystring, retriever, url;
      http = require("http");
      https = require("https");
      url = require("url");
      querystring = require("querystring");
      _ = require_underscore();
      retriever = null;
      exports.connect = function(options) {
        var api, apiFunctions, base, base1, fn, functionName, i, len;
        if (options == null) {
          options = {};
        }
        if (!("apikey" in options)) {
          throw new Error("You must specify etherpad-lite apikey");
        }
        api = {};
        api.options = _.extend({}, options);
        (base = api.options).host || (base.host = "localhost");
        (base1 = api.options).port || (base1.port = 9001);
        retriever = http;
        if (api.options.port === 443 || api.options.ssl) {
          retriever = https;
        }
        api.call = function(functionName2, functionArgs, callback) {
          var apiOptions, chunks, httpOptions, req, rootPath;
          rootPath = api.options.rootPath || "/api/1.2.12/";
          apiOptions = _.extend({
            "apikey": this.options.apikey
          }, functionArgs);
          httpOptions = _.extend(this.options, {
            path: rootPath + functionName2 + "?" + querystring.stringify(apiOptions)
          });
          chunks = [];
          req = retriever.get(httpOptions, function(res) {
            res.on("data", function(data) {
              return chunks.push(data);
            });
            return res.on("end", function() {
              var error, error1, response;
              try {
                response = JSON.parse(chunks.join(""));
              } catch (error12) {
                error = error12;
                callback({
                  code: -1,
                  message: "cannot parse the API response"
                }, null);
                return;
              }
              if (response.code === 0 && response.message === "ok") {
                if (response.data) {
                  return callback(null, response.data);
                } else {
                  return callback(null, response);
                }
              } else {
                return callback({
                  code: response.code,
                  message: response.message
                }, null);
              }
            });
          });
          return req.on("error", function(error) {
            return callback({
              code: -1,
              message: error.message || error
            }, null);
          });
        };
        apiFunctions = ["createGroup", "createGroupIfNotExistsFor", "deleteGroup", "listPads", "listAllPads", "createDiffHTML", "createPad", "createGroupPad", "createAuthor", "createAuthorIfNotExistsFor", "listPadsOfAuthor", "createSession", "deleteSession", "getSessionInfo", "listSessionsOfGroup", "listSessionsOfAuthor", "getText", "setText", "getHTML", "setHTML", "getAttributePool", "getRevisionsCount", "getSavedRevisionsCount", "listSavedRevisions", "saveRevision", "getRevisionChangeset", "getLastEdited", "deletePad", "copyPad", "movePad", "getReadOnlyID", "getPadID", "setPublicStatus", "getPublicStatus", "setPassword", "isPasswordProtected", "listAuthorsOfPad", "padUsersCount", "getAuthorName", "padUsers", "sendClientsMessage", "listAllGroups", "checkToken", "appendChatMessage", "getChatHistory", "getChatHistory", "getChatHead", "restoreRevision"];
        fn = function(functionName2) {
          return api[functionName2] = function(args, callback) {
            if (arguments.length === 1 && _.isFunction(args)) {
              callback = args;
              args = {};
            }
            if (callback == null) {
              callback = function() {
              };
            }
            api.call(functionName2, args, callback);
            return null;
          };
        };
        for (i = 0, len = apiFunctions.length; i < len; i++) {
          functionName = apiFunctions[i];
          fn(functionName);
        }
        return api;
      };
    }).call(exports);
  }
});

// node_modules/turndown/lib/turndown.browser.cjs.js
var require_turndown_browser_cjs = __commonJS({
  "node_modules/turndown/lib/turndown.browser.cjs.js"(exports, module2) {
    "use strict";
    function extend(destination) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];
        for (var key in source) {
          if (source.hasOwnProperty(key))
            destination[key] = source[key];
        }
      }
      return destination;
    }
    function repeat(character, count) {
      return Array(count + 1).join(character);
    }
    function trimLeadingNewlines(string) {
      return string.replace(/^\n*/, "");
    }
    function trimTrailingNewlines(string) {
      var indexEnd = string.length;
      while (indexEnd > 0 && string[indexEnd - 1] === "\n")
        indexEnd--;
      return string.substring(0, indexEnd);
    }
    var blockElements = [
      "ADDRESS",
      "ARTICLE",
      "ASIDE",
      "AUDIO",
      "BLOCKQUOTE",
      "BODY",
      "CANVAS",
      "CENTER",
      "DD",
      "DIR",
      "DIV",
      "DL",
      "DT",
      "FIELDSET",
      "FIGCAPTION",
      "FIGURE",
      "FOOTER",
      "FORM",
      "FRAMESET",
      "H1",
      "H2",
      "H3",
      "H4",
      "H5",
      "H6",
      "HEADER",
      "HGROUP",
      "HR",
      "HTML",
      "ISINDEX",
      "LI",
      "MAIN",
      "MENU",
      "NAV",
      "NOFRAMES",
      "NOSCRIPT",
      "OL",
      "OUTPUT",
      "P",
      "PRE",
      "SECTION",
      "TABLE",
      "TBODY",
      "TD",
      "TFOOT",
      "TH",
      "THEAD",
      "TR",
      "UL"
    ];
    function isBlock(node) {
      return is(node, blockElements);
    }
    var voidElements = [
      "AREA",
      "BASE",
      "BR",
      "COL",
      "COMMAND",
      "EMBED",
      "HR",
      "IMG",
      "INPUT",
      "KEYGEN",
      "LINK",
      "META",
      "PARAM",
      "SOURCE",
      "TRACK",
      "WBR"
    ];
    function isVoid(node) {
      return is(node, voidElements);
    }
    function hasVoid(node) {
      return has(node, voidElements);
    }
    var meaningfulWhenBlankElements = [
      "A",
      "TABLE",
      "THEAD",
      "TBODY",
      "TFOOT",
      "TH",
      "TD",
      "IFRAME",
      "SCRIPT",
      "AUDIO",
      "VIDEO"
    ];
    function isMeaningfulWhenBlank(node) {
      return is(node, meaningfulWhenBlankElements);
    }
    function hasMeaningfulWhenBlank(node) {
      return has(node, meaningfulWhenBlankElements);
    }
    function is(node, tagNames) {
      return tagNames.indexOf(node.nodeName) >= 0;
    }
    function has(node, tagNames) {
      return node.getElementsByTagName && tagNames.some(function(tagName) {
        return node.getElementsByTagName(tagName).length;
      });
    }
    var rules = {};
    rules.paragraph = {
      filter: "p",
      replacement: function(content) {
        return "\n\n" + content + "\n\n";
      }
    };
    rules.lineBreak = {
      filter: "br",
      replacement: function(content, node, options) {
        return options.br + "\n";
      }
    };
    rules.heading = {
      filter: ["h1", "h2", "h3", "h4", "h5", "h6"],
      replacement: function(content, node, options) {
        var hLevel = Number(node.nodeName.charAt(1));
        if (options.headingStyle === "setext" && hLevel < 3) {
          var underline = repeat(hLevel === 1 ? "=" : "-", content.length);
          return "\n\n" + content + "\n" + underline + "\n\n";
        } else {
          return "\n\n" + repeat("#", hLevel) + " " + content + "\n\n";
        }
      }
    };
    rules.blockquote = {
      filter: "blockquote",
      replacement: function(content) {
        content = content.replace(/^\n+|\n+$/g, "");
        content = content.replace(/^/gm, "> ");
        return "\n\n" + content + "\n\n";
      }
    };
    rules.list = {
      filter: ["ul", "ol"],
      replacement: function(content, node) {
        var parent = node.parentNode;
        if (parent.nodeName === "LI" && parent.lastElementChild === node) {
          return "\n" + content;
        } else {
          return "\n\n" + content + "\n\n";
        }
      }
    };
    rules.listItem = {
      filter: "li",
      replacement: function(content, node, options) {
        content = content.replace(/^\n+/, "").replace(/\n+$/, "\n").replace(/\n/gm, "\n    ");
        var prefix = options.bulletListMarker + "   ";
        var parent = node.parentNode;
        if (parent.nodeName === "OL") {
          var start = parent.getAttribute("start");
          var index = Array.prototype.indexOf.call(parent.children, node);
          prefix = (start ? Number(start) + index : index + 1) + ".  ";
        }
        return prefix + content + (node.nextSibling && !/\n$/.test(content) ? "\n" : "");
      }
    };
    rules.indentedCodeBlock = {
      filter: function(node, options) {
        return options.codeBlockStyle === "indented" && node.nodeName === "PRE" && node.firstChild && node.firstChild.nodeName === "CODE";
      },
      replacement: function(content, node, options) {
        return "\n\n    " + node.firstChild.textContent.replace(/\n/g, "\n    ") + "\n\n";
      }
    };
    rules.fencedCodeBlock = {
      filter: function(node, options) {
        return options.codeBlockStyle === "fenced" && node.nodeName === "PRE" && node.firstChild && node.firstChild.nodeName === "CODE";
      },
      replacement: function(content, node, options) {
        var className = node.firstChild.getAttribute("class") || "";
        var language = (className.match(/language-(\S+)/) || [null, ""])[1];
        var code = node.firstChild.textContent;
        var fenceChar = options.fence.charAt(0);
        var fenceSize = 3;
        var fenceInCodeRegex = new RegExp("^" + fenceChar + "{3,}", "gm");
        var match;
        while (match = fenceInCodeRegex.exec(code)) {
          if (match[0].length >= fenceSize) {
            fenceSize = match[0].length + 1;
          }
        }
        var fence = repeat(fenceChar, fenceSize);
        return "\n\n" + fence + language + "\n" + code.replace(/\n$/, "") + "\n" + fence + "\n\n";
      }
    };
    rules.horizontalRule = {
      filter: "hr",
      replacement: function(content, node, options) {
        return "\n\n" + options.hr + "\n\n";
      }
    };
    rules.inlineLink = {
      filter: function(node, options) {
        return options.linkStyle === "inlined" && node.nodeName === "A" && node.getAttribute("href");
      },
      replacement: function(content, node) {
        var href = node.getAttribute("href");
        var title = cleanAttribute(node.getAttribute("title"));
        if (title)
          title = ' "' + title + '"';
        return "[" + content + "](" + href + title + ")";
      }
    };
    rules.referenceLink = {
      filter: function(node, options) {
        return options.linkStyle === "referenced" && node.nodeName === "A" && node.getAttribute("href");
      },
      replacement: function(content, node, options) {
        var href = node.getAttribute("href");
        var title = cleanAttribute(node.getAttribute("title"));
        if (title)
          title = ' "' + title + '"';
        var replacement;
        var reference;
        switch (options.linkReferenceStyle) {
          case "collapsed":
            replacement = "[" + content + "][]";
            reference = "[" + content + "]: " + href + title;
            break;
          case "shortcut":
            replacement = "[" + content + "]";
            reference = "[" + content + "]: " + href + title;
            break;
          default:
            var id = this.references.length + 1;
            replacement = "[" + content + "][" + id + "]";
            reference = "[" + id + "]: " + href + title;
        }
        this.references.push(reference);
        return replacement;
      },
      references: [],
      append: function(options) {
        var references = "";
        if (this.references.length) {
          references = "\n\n" + this.references.join("\n") + "\n\n";
          this.references = [];
        }
        return references;
      }
    };
    rules.emphasis = {
      filter: ["em", "i"],
      replacement: function(content, node, options) {
        if (!content.trim())
          return "";
        return options.emDelimiter + content + options.emDelimiter;
      }
    };
    rules.strong = {
      filter: ["strong", "b"],
      replacement: function(content, node, options) {
        if (!content.trim())
          return "";
        return options.strongDelimiter + content + options.strongDelimiter;
      }
    };
    rules.code = {
      filter: function(node) {
        var hasSiblings = node.previousSibling || node.nextSibling;
        var isCodeBlock = node.parentNode.nodeName === "PRE" && !hasSiblings;
        return node.nodeName === "CODE" && !isCodeBlock;
      },
      replacement: function(content) {
        if (!content)
          return "";
        content = content.replace(/\r?\n|\r/g, " ");
        var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? " " : "";
        var delimiter = "`";
        var matches = content.match(/`+/gm) || [];
        while (matches.indexOf(delimiter) !== -1)
          delimiter = delimiter + "`";
        return delimiter + extraSpace + content + extraSpace + delimiter;
      }
    };
    rules.image = {
      filter: "img",
      replacement: function(content, node) {
        var alt = cleanAttribute(node.getAttribute("alt"));
        var src = node.getAttribute("src") || "";
        var title = cleanAttribute(node.getAttribute("title"));
        var titlePart = title ? ' "' + title + '"' : "";
        return src ? "![" + alt + "](" + src + titlePart + ")" : "";
      }
    };
    function cleanAttribute(attribute) {
      return attribute ? attribute.replace(/(\n+\s*)+/g, "\n") : "";
    }
    function Rules(options) {
      this.options = options;
      this._keep = [];
      this._remove = [];
      this.blankRule = {
        replacement: options.blankReplacement
      };
      this.keepReplacement = options.keepReplacement;
      this.defaultRule = {
        replacement: options.defaultReplacement
      };
      this.array = [];
      for (var key in options.rules)
        this.array.push(options.rules[key]);
    }
    Rules.prototype = {
      add: function(key, rule) {
        this.array.unshift(rule);
      },
      keep: function(filter) {
        this._keep.unshift({
          filter,
          replacement: this.keepReplacement
        });
      },
      remove: function(filter) {
        this._remove.unshift({
          filter,
          replacement: function() {
            return "";
          }
        });
      },
      forNode: function(node) {
        if (node.isBlank)
          return this.blankRule;
        var rule;
        if (rule = findRule(this.array, node, this.options))
          return rule;
        if (rule = findRule(this._keep, node, this.options))
          return rule;
        if (rule = findRule(this._remove, node, this.options))
          return rule;
        return this.defaultRule;
      },
      forEach: function(fn) {
        for (var i = 0; i < this.array.length; i++)
          fn(this.array[i], i);
      }
    };
    function findRule(rules2, node, options) {
      for (var i = 0; i < rules2.length; i++) {
        var rule = rules2[i];
        if (filterValue(rule, node, options))
          return rule;
      }
      return void 0;
    }
    function filterValue(rule, node, options) {
      var filter = rule.filter;
      if (typeof filter === "string") {
        if (filter === node.nodeName.toLowerCase())
          return true;
      } else if (Array.isArray(filter)) {
        if (filter.indexOf(node.nodeName.toLowerCase()) > -1)
          return true;
      } else if (typeof filter === "function") {
        if (filter.call(rule, node, options))
          return true;
      } else {
        throw new TypeError("`filter` needs to be a string, array, or function");
      }
    }
    function collapseWhitespace(options) {
      var element = options.element;
      var isBlock2 = options.isBlock;
      var isVoid2 = options.isVoid;
      var isPre = options.isPre || function(node2) {
        return node2.nodeName === "PRE";
      };
      if (!element.firstChild || isPre(element))
        return;
      var prevText = null;
      var keepLeadingWs = false;
      var prev = null;
      var node = next(prev, element, isPre);
      while (node !== element) {
        if (node.nodeType === 3 || node.nodeType === 4) {
          var text = node.data.replace(/[ \r\n\t]+/g, " ");
          if ((!prevText || / $/.test(prevText.data)) && !keepLeadingWs && text[0] === " ") {
            text = text.substr(1);
          }
          if (!text) {
            node = remove(node);
            continue;
          }
          node.data = text;
          prevText = node;
        } else if (node.nodeType === 1) {
          if (isBlock2(node) || node.nodeName === "BR") {
            if (prevText) {
              prevText.data = prevText.data.replace(/ $/, "");
            }
            prevText = null;
            keepLeadingWs = false;
          } else if (isVoid2(node) || isPre(node)) {
            prevText = null;
            keepLeadingWs = true;
          } else if (prevText) {
            keepLeadingWs = false;
          }
        } else {
          node = remove(node);
          continue;
        }
        var nextNode = next(prev, node, isPre);
        prev = node;
        node = nextNode;
      }
      if (prevText) {
        prevText.data = prevText.data.replace(/ $/, "");
        if (!prevText.data) {
          remove(prevText);
        }
      }
    }
    function remove(node) {
      var next2 = node.nextSibling || node.parentNode;
      node.parentNode.removeChild(node);
      return next2;
    }
    function next(prev, current, isPre) {
      if (prev && prev.parentNode === current || isPre(current)) {
        return current.nextSibling || current.parentNode;
      }
      return current.firstChild || current.nextSibling || current.parentNode;
    }
    var root = typeof window !== "undefined" ? window : {};
    function canParseHTMLNatively() {
      var Parser = root.DOMParser;
      var canParse = false;
      try {
        if (new Parser().parseFromString("", "text/html")) {
          canParse = true;
        }
      } catch (e) {
      }
      return canParse;
    }
    function createHTMLParser() {
      var Parser = function() {
      };
      {
        if (shouldUseActiveX()) {
          Parser.prototype.parseFromString = function(string) {
            var doc = new window.ActiveXObject("htmlfile");
            doc.designMode = "on";
            doc.open();
            doc.write(string);
            doc.close();
            return doc;
          };
        } else {
          Parser.prototype.parseFromString = function(string) {
            var doc = document.implementation.createHTMLDocument("");
            doc.open();
            doc.write(string);
            doc.close();
            return doc;
          };
        }
      }
      return Parser;
    }
    function shouldUseActiveX() {
      var useActiveX = false;
      try {
        document.implementation.createHTMLDocument("").open();
      } catch (e) {
        if (window.ActiveXObject)
          useActiveX = true;
      }
      return useActiveX;
    }
    var HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();
    function RootNode(input, options) {
      var root2;
      if (typeof input === "string") {
        var doc = htmlParser().parseFromString('<x-turndown id="turndown-root">' + input + "</x-turndown>", "text/html");
        root2 = doc.getElementById("turndown-root");
      } else {
        root2 = input.cloneNode(true);
      }
      collapseWhitespace({
        element: root2,
        isBlock,
        isVoid,
        isPre: options.preformattedCode ? isPreOrCode : null
      });
      return root2;
    }
    var _htmlParser;
    function htmlParser() {
      _htmlParser = _htmlParser || new HTMLParser();
      return _htmlParser;
    }
    function isPreOrCode(node) {
      return node.nodeName === "PRE" || node.nodeName === "CODE";
    }
    function Node(node, options) {
      node.isBlock = isBlock(node);
      node.isCode = node.nodeName === "CODE" || node.parentNode.isCode;
      node.isBlank = isBlank(node);
      node.flankingWhitespace = flankingWhitespace(node, options);
      return node;
    }
    function isBlank(node) {
      return !isVoid(node) && !isMeaningfulWhenBlank(node) && /^\s*$/i.test(node.textContent) && !hasVoid(node) && !hasMeaningfulWhenBlank(node);
    }
    function flankingWhitespace(node, options) {
      if (node.isBlock || options.preformattedCode && node.isCode) {
        return { leading: "", trailing: "" };
      }
      var edges = edgeWhitespace(node.textContent);
      if (edges.leadingAscii && isFlankedByWhitespace("left", node, options)) {
        edges.leading = edges.leadingNonAscii;
      }
      if (edges.trailingAscii && isFlankedByWhitespace("right", node, options)) {
        edges.trailing = edges.trailingNonAscii;
      }
      return { leading: edges.leading, trailing: edges.trailing };
    }
    function edgeWhitespace(string) {
      var m = string.match(/^(([ \t\r\n]*)(\s*))[\s\S]*?((\s*?)([ \t\r\n]*))$/);
      return {
        leading: m[1],
        leadingAscii: m[2],
        leadingNonAscii: m[3],
        trailing: m[4],
        trailingNonAscii: m[5],
        trailingAscii: m[6]
      };
    }
    function isFlankedByWhitespace(side, node, options) {
      var sibling;
      var regExp;
      var isFlanked;
      if (side === "left") {
        sibling = node.previousSibling;
        regExp = / $/;
      } else {
        sibling = node.nextSibling;
        regExp = /^ /;
      }
      if (sibling) {
        if (sibling.nodeType === 3) {
          isFlanked = regExp.test(sibling.nodeValue);
        } else if (options.preformattedCode && sibling.nodeName === "CODE") {
          isFlanked = false;
        } else if (sibling.nodeType === 1 && !isBlock(sibling)) {
          isFlanked = regExp.test(sibling.textContent);
        }
      }
      return isFlanked;
    }
    var reduce = Array.prototype.reduce;
    var escapes = [
      [/\\/g, "\\\\"],
      [/\*/g, "\\*"],
      [/^-/g, "\\-"],
      [/^\+ /g, "\\+ "],
      [/^(=+)/g, "\\$1"],
      [/^(#{1,6}) /g, "\\$1 "],
      [/`/g, "\\`"],
      [/^~~~/g, "\\~~~"],
      [/\[/g, "\\["],
      [/\]/g, "\\]"],
      [/^>/g, "\\>"],
      [/_/g, "\\_"],
      [/^(\d+)\. /g, "$1\\. "]
    ];
    function TurndownService2(options) {
      if (!(this instanceof TurndownService2))
        return new TurndownService2(options);
      var defaults = {
        rules,
        headingStyle: "setext",
        hr: "* * *",
        bulletListMarker: "*",
        codeBlockStyle: "indented",
        fence: "```",
        emDelimiter: "_",
        strongDelimiter: "**",
        linkStyle: "inlined",
        linkReferenceStyle: "full",
        br: "  ",
        preformattedCode: false,
        blankReplacement: function(content, node) {
          return node.isBlock ? "\n\n" : "";
        },
        keepReplacement: function(content, node) {
          return node.isBlock ? "\n\n" + node.outerHTML + "\n\n" : node.outerHTML;
        },
        defaultReplacement: function(content, node) {
          return node.isBlock ? "\n\n" + content + "\n\n" : content;
        }
      };
      this.options = extend({}, defaults, options);
      this.rules = new Rules(this.options);
    }
    TurndownService2.prototype = {
      turndown: function(input) {
        if (!canConvert(input)) {
          throw new TypeError(input + " is not a string, or an element/document/fragment node.");
        }
        if (input === "")
          return "";
        var output = process.call(this, new RootNode(input, this.options));
        return postProcess.call(this, output);
      },
      use: function(plugin) {
        if (Array.isArray(plugin)) {
          for (var i = 0; i < plugin.length; i++)
            this.use(plugin[i]);
        } else if (typeof plugin === "function") {
          plugin(this);
        } else {
          throw new TypeError("plugin must be a Function or an Array of Functions");
        }
        return this;
      },
      addRule: function(key, rule) {
        this.rules.add(key, rule);
        return this;
      },
      keep: function(filter) {
        this.rules.keep(filter);
        return this;
      },
      remove: function(filter) {
        this.rules.remove(filter);
        return this;
      },
      escape: function(string) {
        return escapes.reduce(function(accumulator, escape) {
          return accumulator.replace(escape[0], escape[1]);
        }, string);
      }
    };
    function process(parentNode) {
      var self = this;
      return reduce.call(parentNode.childNodes, function(output, node) {
        node = new Node(node, self.options);
        var replacement = "";
        if (node.nodeType === 3) {
          replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);
        } else if (node.nodeType === 1) {
          replacement = replacementForNode.call(self, node);
        }
        return join(output, replacement);
      }, "");
    }
    function postProcess(output) {
      var self = this;
      this.rules.forEach(function(rule) {
        if (typeof rule.append === "function") {
          output = join(output, rule.append(self.options));
        }
      });
      return output.replace(/^[\t\r\n]+/, "").replace(/[\t\r\n\s]+$/, "");
    }
    function replacementForNode(node) {
      var rule = this.rules.forNode(node);
      var content = process.call(this, node);
      var whitespace = node.flankingWhitespace;
      if (whitespace.leading || whitespace.trailing)
        content = content.trim();
      return whitespace.leading + rule.replacement(content, node, this.options) + whitespace.trailing;
    }
    function join(output, replacement) {
      var s1 = trimTrailingNewlines(output);
      var s2 = trimLeadingNewlines(replacement);
      var nls = Math.max(output.length - s1.length, replacement.length - s2.length);
      var separator = "\n\n".substring(0, nls);
      return s1 + separator + s2;
    }
    function canConvert(input) {
      return input != null && (typeof input === "string" || input.nodeType && (input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11));
    }
    module2.exports = TurndownService2;
  }
});

// main.ts
__export(exports, {
  default: () => Etherpad
});
var import_obsidian = __toModule(require("obsidian"));
var import_obsidian2 = __toModule(require("obsidian"));
var etherpad = require_main();
var TurndownService = require_turndown_browser_cjs();
TurndownService.prototype.escape = (text) => text;
function makeid(length) {
  let result = "";
  let characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  let charactersLength = characters.length;
  for (let i = 0; i < length; i++) {
    result += characters.charAt(Math.floor(Math.random() * charactersLength));
  }
  return result;
}
var td = new TurndownService().addRule("strikethrough", {
  filter: ["s"],
  replacement: function(content) {
    return "~~" + content + "~~";
  }
}).addRule("underline", {
  filter: ["u"],
  replacement: function(content) {
    return "==" + content + "==";
  }
}).addRule("a", {
  filter: ["a"],
  replacement: function(content, node, options) {
    return node.getAttribute("href");
  }
});
var DEFAULT_SETTINGS = {
  host: "localhost",
  port: 9001,
  apikey: "",
  random_pad_id: true
};
var Etherpad = class extends import_obsidian.Plugin {
  get etherpad() {
    return etherpad.connect({
      apikey: this.settings.apikey,
      host: this.settings.host,
      port: this.settings.port
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.registerEvent(this.app.workspace.on("file-open", (note) => __async(this, null, function* () {
        this.replace_note_from_etherpad(note);
      })));
      this.addCommand({
        id: "etherpad-create-pad",
        name: "Convert current document to Etherpad",
        editorCallback: (editor, view) => __async(this, null, function* () {
          const note = view.file;
          if (!note.name)
            return;
          let note_text = editor.getValue();
          let note_text_without_frontmatter = yield this.get_text_without_frontmatter(note_text, note);
          let pad_id = this.settings.random_pad_id ? makeid(12) : note.basename;
          this.etherpad.createPad({
            padID: pad_id,
            text: note_text_without_frontmatter
          }, (error, data) => {
            if (error) {
              new import_obsidian.Notice(`Error creating pad ${pad_id}: ${error.message}`);
            } else {
              this.update_frontmatter(note_text, note, { etherpad_id: pad_id });
            }
          });
        })
      });
      this.addCommand({
        id: "etherpad-get-pad",
        name: "Replace note content from Etherpad",
        editorCallback: (editor, view) => __async(this, null, function* () {
          const note = view.file;
          this.replace_note_from_etherpad(note);
        })
      });
      this.addCommand({
        id: "etherpad-visit-pad",
        name: "Visit note in Etherpad in system browser",
        editorCallback: (editor, view) => __async(this, null, function* () {
          let note = view.file;
          if (!note.name)
            return;
          let frontmatter = this.get_frontmatter(note);
          if (frontmatter == null ? void 0 : frontmatter.etherpad_id) {
            let url = this.get_url_for_pad_id(frontmatter.etherpad_id);
            window.open(url);
          }
        })
      });
      this.addSettingTab(new EtherpadSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  get_frontmatter(note) {
    var _a;
    return __spreadValues({}, (_a = this.app.metadataCache.getFileCache(note)) == null ? void 0 : _a.frontmatter);
  }
  get_text_without_frontmatter(note_text, note) {
    return __async(this, null, function* () {
      var _a;
      let fmc = (_a = app.metadataCache.getFileCache(note)) == null ? void 0 : _a.frontmatter;
      if (!fmc) {
        return note_text;
      }
      let end = fmc.position.end.line + 1;
      return note_text.split("\n").slice(end).join("\n");
    });
  }
  update_frontmatter(note_text, note, d) {
    return __async(this, null, function* () {
      let frontmatter = this.get_frontmatter(note);
      let updated_frontmatter;
      if (!frontmatter) {
        updated_frontmatter = d;
      } else {
        updated_frontmatter = __spreadValues(__spreadValues({}, frontmatter), d);
      }
      delete updated_frontmatter.position;
      let frontmatter_text = `---
${(0, import_obsidian2.stringifyYaml)(updated_frontmatter)}---
`;
      this.app.vault.modify(note, frontmatter_text + note_text);
    });
  }
  get_url_for_pad_id(pad_id) {
    pad_id = pad_id.replace(" ", "_");
    return `http://${this.settings.host}:${this.settings.port}/p/${pad_id}`;
  }
  replace_note_from_etherpad(note) {
    return __async(this, null, function* () {
      if (note == null)
        return;
      let frontmatter = this.get_frontmatter(note);
      if (!frontmatter)
        return;
      if (!frontmatter.etherpad_id)
        return;
      this.etherpad.getHTML({ padID: frontmatter.etherpad_id }, (err, data) => {
        if (err) {
          console.log("err", err);
          new import_obsidian.Notice("error: " + err);
        } else {
          delete frontmatter.position;
          let now = new Date();
          frontmatter.etherpad_get_at = now.toLocaleString();
          let frontmatter_text = `---
${(0, import_obsidian2.stringifyYaml)(frontmatter)}---
`;
          let note_html = data.html;
          let note_text = td.turndown(note_html);
          this.app.vault.modify(note, frontmatter_text + note_text);
          let url = this.get_url_for_pad_id(frontmatter.etherpad_id);
          new import_obsidian.Notice(`Note was reloaded from ${url}.
Local edits will be discarded!`);
        }
      });
    });
  }
};
var EtherpadSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Etherpad Settings" });
    new import_obsidian.Setting(containerEl).setName("Server host").setDesc("Server host").addText((text) => text.setPlaceholder("localhost").setValue(this.plugin.settings.host).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.host = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Server port").setDesc("Server port").addText((text) => text.setPlaceholder("9001").setValue(this.plugin.settings.port.toString()).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.port = parseInt(value);
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("API key").setDesc("API key").addText((text) => text.setPlaceholder("").setValue(this.plugin.settings.apikey).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.apikey = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Random pad ID").setDesc("Use a random pad id, or current file name").addToggle((b) => b.setValue(this.plugin.settings.random_pad_id).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.random_pad_id = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyIsICJub2RlX21vZHVsZXMvZXRoZXJwYWQtbGl0ZS1jbGllbnQvbWFpbi5qcyIsICJub2RlX21vZHVsZXMvdHVybmRvd24vbGliL3R1cm5kb3duLmJyb3dzZXIuY2pzLmpzIiwgIm1haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vICAgICBVbmRlcnNjb3JlLmpzIDEuMy4zXG4vLyAgICAgKGMpIDIwMDktMjAxMiBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgSW5jLlxuLy8gICAgIFVuZGVyc2NvcmUgaXMgZnJlZWx5IGRpc3RyaWJ1dGFibGUgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gICAgIFBvcnRpb25zIG9mIFVuZGVyc2NvcmUgYXJlIGluc3BpcmVkIG9yIGJvcnJvd2VkIGZyb20gUHJvdG90eXBlLFxuLy8gICAgIE9saXZlciBTdGVlbGUncyBGdW5jdGlvbmFsLCBhbmQgSm9obiBSZXNpZydzIE1pY3JvLVRlbXBsYXRpbmcuXG4vLyAgICAgRm9yIGFsbCBkZXRhaWxzIGFuZCBkb2N1bWVudGF0aW9uOlxuLy8gICAgIGh0dHA6Ly9kb2N1bWVudGNsb3VkLmdpdGh1Yi5jb20vdW5kZXJzY29yZVxuXG4oZnVuY3Rpb24oKSB7XG5cbiAgLy8gQmFzZWxpbmUgc2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICAvLyBFc3RhYmxpc2ggdGhlIHJvb3Qgb2JqZWN0LCBgd2luZG93YCBpbiB0aGUgYnJvd3Nlciwgb3IgYGdsb2JhbGAgb24gdGhlIHNlcnZlci5cbiAgdmFyIHJvb3QgPSB0aGlzO1xuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG4gIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87XG5cbiAgLy8gRXN0YWJsaXNoIHRoZSBvYmplY3QgdGhhdCBnZXRzIHJldHVybmVkIHRvIGJyZWFrIG91dCBvZiBhIGxvb3AgaXRlcmF0aW9uLlxuICB2YXIgYnJlYWtlciA9IHt9O1xuXG4gIC8vIFNhdmUgYnl0ZXMgaW4gdGhlIG1pbmlmaWVkIChidXQgbm90IGd6aXBwZWQpIHZlcnNpb246XG4gIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGUsIEZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuICAvLyBDcmVhdGUgcXVpY2sgcmVmZXJlbmNlIHZhcmlhYmxlcyBmb3Igc3BlZWQgYWNjZXNzIHRvIGNvcmUgcHJvdG90eXBlcy5cbiAgdmFyIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgICAgdW5zaGlmdCAgICAgICAgICA9IEFycmF5UHJvdG8udW5zaGlmdCxcbiAgICAgIHRvU3RyaW5nICAgICAgICAgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICAgIGhhc093blByb3BlcnR5ICAgPSBPYmpQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuICAvLyBBbGwgKipFQ01BU2NyaXB0IDUqKiBuYXRpdmUgZnVuY3Rpb24gaW1wbGVtZW50YXRpb25zIHRoYXQgd2UgaG9wZSB0byB1c2VcbiAgLy8gYXJlIGRlY2xhcmVkIGhlcmUuXG4gIHZhclxuICAgIG5hdGl2ZUZvckVhY2ggICAgICA9IEFycmF5UHJvdG8uZm9yRWFjaCxcbiAgICBuYXRpdmVNYXAgICAgICAgICAgPSBBcnJheVByb3RvLm1hcCxcbiAgICBuYXRpdmVSZWR1Y2UgICAgICAgPSBBcnJheVByb3RvLnJlZHVjZSxcbiAgICBuYXRpdmVSZWR1Y2VSaWdodCAgPSBBcnJheVByb3RvLnJlZHVjZVJpZ2h0LFxuICAgIG5hdGl2ZUZpbHRlciAgICAgICA9IEFycmF5UHJvdG8uZmlsdGVyLFxuICAgIG5hdGl2ZUV2ZXJ5ICAgICAgICA9IEFycmF5UHJvdG8uZXZlcnksXG4gICAgbmF0aXZlU29tZSAgICAgICAgID0gQXJyYXlQcm90by5zb21lLFxuICAgIG5hdGl2ZUluZGV4T2YgICAgICA9IEFycmF5UHJvdG8uaW5kZXhPZixcbiAgICBuYXRpdmVMYXN0SW5kZXhPZiAgPSBBcnJheVByb3RvLmxhc3RJbmRleE9mLFxuICAgIG5hdGl2ZUlzQXJyYXkgICAgICA9IEFycmF5LmlzQXJyYXksXG4gICAgbmF0aXZlS2V5cyAgICAgICAgID0gT2JqZWN0LmtleXMsXG4gICAgbmF0aXZlQmluZCAgICAgICAgID0gRnVuY1Byb3RvLmJpbmQ7XG5cbiAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuXG4gIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7IHJldHVybiBuZXcgd3JhcHBlcihvYmopOyB9O1xuXG4gIC8vIEV4cG9ydCB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yICoqTm9kZS5qcyoqLCB3aXRoXG4gIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW5cbiAgLy8gdGhlIGJyb3dzZXIsIGFkZCBgX2AgYXMgYSBnbG9iYWwgb2JqZWN0IHZpYSBhIHN0cmluZyBpZGVudGlmaWVyLFxuICAvLyBmb3IgQ2xvc3VyZSBDb21waWxlciBcImFkdmFuY2VkXCIgbW9kZS5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gXztcbiAgICB9XG4gICAgZXhwb3J0cy5fID0gXztcbiAgfSBlbHNlIHtcbiAgICByb290WydfJ10gPSBfO1xuICB9XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uLlxuICBfLlZFUlNJT04gPSAnMS4zLjMnO1xuXG4gIC8vIENvbGxlY3Rpb24gRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuXG4gIC8vIEhhbmRsZXMgb2JqZWN0cyB3aXRoIHRoZSBidWlsdC1pbiBgZm9yRWFjaGAsIGFycmF5cywgYW5kIHJhdyBvYmplY3RzLlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgZm9yRWFjaGAgaWYgYXZhaWxhYmxlLlxuICB2YXIgZWFjaCA9IF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybjtcbiAgICBpZiAobmF0aXZlRm9yRWFjaCAmJiBvYmouZm9yRWFjaCA9PT0gbmF0aXZlRm9yRWFjaCkge1xuICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCA9PT0gK29iai5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoaSBpbiBvYmogJiYgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaikgPT09IGJyZWFrZXIpIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoXy5oYXMob2JqLCBrZXkpKSB7XG4gICAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleV0sIGtleSwgb2JqKSA9PT0gYnJlYWtlcikgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0b3IgdG8gZWFjaCBlbGVtZW50LlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgbWFwYCBpZiBhdmFpbGFibGUuXG4gIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0cztcbiAgICBpZiAobmF0aXZlTWFwICYmIG9iai5tYXAgPT09IG5hdGl2ZU1hcCkgcmV0dXJuIG9iai5tYXAoaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuICAgIH0pO1xuICAgIGlmIChvYmoubGVuZ3RoID09PSArb2JqLmxlbmd0aCkgcmVzdWx0cy5sZW5ndGggPSBvYmoubGVuZ3RoO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vICoqUmVkdWNlKiogYnVpbGRzIHVwIGEgc2luZ2xlIHJlc3VsdCBmcm9tIGEgbGlzdCBvZiB2YWx1ZXMsIGFrYSBgaW5qZWN0YCxcbiAgLy8gb3IgYGZvbGRsYC4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYHJlZHVjZWAgaWYgYXZhaWxhYmxlLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIG1lbW8sIGNvbnRleHQpIHtcbiAgICB2YXIgaW5pdGlhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xuICAgIGlmIChvYmogPT0gbnVsbCkgb2JqID0gW107XG4gICAgaWYgKG5hdGl2ZVJlZHVjZSAmJiBvYmoucmVkdWNlID09PSBuYXRpdmVSZWR1Y2UpIHtcbiAgICAgIGlmIChjb250ZXh0KSBpdGVyYXRvciA9IF8uYmluZChpdGVyYXRvciwgY29udGV4dCk7XG4gICAgICByZXR1cm4gaW5pdGlhbCA/IG9iai5yZWR1Y2UoaXRlcmF0b3IsIG1lbW8pIDogb2JqLnJlZHVjZShpdGVyYXRvcik7XG4gICAgfVxuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmICghaW5pdGlhbCkge1xuICAgICAgICBtZW1vID0gdmFsdWU7XG4gICAgICAgIGluaXRpYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVtbyA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgbWVtbywgdmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWluaXRpYWwpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKTtcbiAgICByZXR1cm4gbWVtbztcbiAgfTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYHJlZHVjZVJpZ2h0YCBpZiBhdmFpbGFibGUuXG4gIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgbWVtbywgY29udGV4dCkge1xuICAgIHZhciBpbml0aWFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XG4gICAgaWYgKG9iaiA9PSBudWxsKSBvYmogPSBbXTtcbiAgICBpZiAobmF0aXZlUmVkdWNlUmlnaHQgJiYgb2JqLnJlZHVjZVJpZ2h0ID09PSBuYXRpdmVSZWR1Y2VSaWdodCkge1xuICAgICAgaWYgKGNvbnRleHQpIGl0ZXJhdG9yID0gXy5iaW5kKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICAgIHJldHVybiBpbml0aWFsID8gb2JqLnJlZHVjZVJpZ2h0KGl0ZXJhdG9yLCBtZW1vKSA6IG9iai5yZWR1Y2VSaWdodChpdGVyYXRvcik7XG4gICAgfVxuICAgIHZhciByZXZlcnNlZCA9IF8udG9BcnJheShvYmopLnJldmVyc2UoKTtcbiAgICBpZiAoY29udGV4dCAmJiAhaW5pdGlhbCkgaXRlcmF0b3IgPSBfLmJpbmQoaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIHJldHVybiBpbml0aWFsID8gXy5yZWR1Y2UocmV2ZXJzZWQsIGl0ZXJhdG9yLCBtZW1vLCBjb250ZXh0KSA6IF8ucmVkdWNlKHJldmVyc2VkLCBpdGVyYXRvcik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLlxuICBfLmZpbmQgPSBfLmRldGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGFueShvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KSkge1xuICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgZmlsdGVyYCBpZiBhdmFpbGFibGUuXG4gIC8vIEFsaWFzZWQgYXMgYHNlbGVjdGAuXG4gIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHRzO1xuICAgIGlmIChuYXRpdmVGaWx0ZXIgJiYgb2JqLmZpbHRlciA9PT0gbmF0aXZlRmlsdGVyKSByZXR1cm4gb2JqLmZpbHRlcihpdGVyYXRvciwgY29udGV4dCk7XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KSkgcmVzdWx0c1tyZXN1bHRzLmxlbmd0aF0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggYSB0cnV0aCB0ZXN0IGZhaWxzLlxuICBfLnJlamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdHM7XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKCFpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgYWxsIG9mIHRoZSBlbGVtZW50cyBtYXRjaCBhIHRydXRoIHRlc3QuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBldmVyeWAgaWYgYXZhaWxhYmxlLlxuICAvLyBBbGlhc2VkIGFzIGBhbGxgLlxuICBfLmV2ZXJ5ID0gXy5hbGwgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChuYXRpdmVFdmVyeSAmJiBvYmouZXZlcnkgPT09IG5hdGl2ZUV2ZXJ5KSByZXR1cm4gb2JqLmV2ZXJ5KGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAoIShyZXN1bHQgPSByZXN1bHQgJiYgaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpKSkgcmV0dXJuIGJyZWFrZXI7XG4gICAgfSk7XG4gICAgcmV0dXJuICEhcmVzdWx0O1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgc29tZWAgaWYgYXZhaWxhYmxlLlxuICAvLyBBbGlhc2VkIGFzIGBhbnlgLlxuICB2YXIgYW55ID0gXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0b3IgfHwgKGl0ZXJhdG9yID0gXy5pZGVudGl0eSk7XG4gICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAobmF0aXZlU29tZSAmJiBvYmouc29tZSA9PT0gbmF0aXZlU29tZSkgcmV0dXJuIG9iai5zb21lKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocmVzdWx0IHx8IChyZXN1bHQgPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpKSByZXR1cm4gYnJlYWtlcjtcbiAgICB9KTtcbiAgICByZXR1cm4gISFyZXN1bHQ7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgaW5jbHVkZWQgaW4gdGhlIGFycmF5IG9yIG9iamVjdCB1c2luZyBgPT09YC5cbiAgLy8gQWxpYXNlZCBhcyBgY29udGFpbnNgLlxuICBfLmluY2x1ZGUgPSBfLmNvbnRhaW5zID0gZnVuY3Rpb24ob2JqLCB0YXJnZXQpIHtcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiBmb3VuZDtcbiAgICBpZiAobmF0aXZlSW5kZXhPZiAmJiBvYmouaW5kZXhPZiA9PT0gbmF0aXZlSW5kZXhPZikgcmV0dXJuIG9iai5pbmRleE9mKHRhcmdldCkgIT0gLTE7XG4gICAgZm91bmQgPSBhbnkob2JqLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB0YXJnZXQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9O1xuXG4gIC8vIEludm9rZSBhIG1ldGhvZCAod2l0aCBhcmd1bWVudHMpIG9uIGV2ZXJ5IGl0ZW0gaW4gYSBjb2xsZWN0aW9uLlxuICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiAoXy5pc0Z1bmN0aW9uKG1ldGhvZCkgPyBtZXRob2QgfHwgdmFsdWUgOiB2YWx1ZVttZXRob2RdKS5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpeyByZXR1cm4gdmFsdWVba2V5XTsgfSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgb3IgKGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICBpZiAoIWl0ZXJhdG9yICYmIF8uaXNBcnJheShvYmopICYmIG9ialswXSA9PT0gK29ialswXSkgcmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsIG9iaik7XG4gICAgaWYgKCFpdGVyYXRvciAmJiBfLmlzRW1wdHkob2JqKSkgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB2YXIgcmVzdWx0ID0ge2NvbXB1dGVkIDogLUluZmluaXR5fTtcbiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICB2YXIgY29tcHV0ZWQgPSBpdGVyYXRvciA/IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KSA6IHZhbHVlO1xuICAgICAgY29tcHV0ZWQgPj0gcmVzdWx0LmNvbXB1dGVkICYmIChyZXN1bHQgPSB7dmFsdWUgOiB2YWx1ZSwgY29tcHV0ZWQgOiBjb21wdXRlZH0pO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICBpZiAoIWl0ZXJhdG9yICYmIF8uaXNBcnJheShvYmopICYmIG9ialswXSA9PT0gK29ialswXSkgcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsIG9iaik7XG4gICAgaWYgKCFpdGVyYXRvciAmJiBfLmlzRW1wdHkob2JqKSkgcmV0dXJuIEluZmluaXR5O1xuICAgIHZhciByZXN1bHQgPSB7Y29tcHV0ZWQgOiBJbmZpbml0eX07XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgdmFyIGNvbXB1dGVkID0gaXRlcmF0b3IgPyBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkgOiB2YWx1ZTtcbiAgICAgIGNvbXB1dGVkIDwgcmVzdWx0LmNvbXB1dGVkICYmIChyZXN1bHQgPSB7dmFsdWUgOiB2YWx1ZSwgY29tcHV0ZWQgOiBjb21wdXRlZH0pO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gIH07XG5cbiAgLy8gU2h1ZmZsZSBhbiBhcnJheS5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHNodWZmbGVkID0gW10sIHJhbmQ7XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpbmRleCArIDEpKTtcbiAgICAgIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW3JhbmRdO1xuICAgICAgc2h1ZmZsZWRbcmFuZF0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gIH07XG5cbiAgLy8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdG9yLlxuICBfLnNvcnRCeSA9IGZ1bmN0aW9uKG9iaiwgdmFsLCBjb250ZXh0KSB7XG4gICAgdmFyIGl0ZXJhdG9yID0gXy5pc0Z1bmN0aW9uKHZhbCkgPyB2YWwgOiBmdW5jdGlvbihvYmopIHsgcmV0dXJuIG9ialt2YWxdOyB9O1xuICAgIHJldHVybiBfLnBsdWNrKF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZSA6IHZhbHVlLFxuICAgICAgICBjcml0ZXJpYSA6IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWEsIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgaWYgKGIgPT09IHZvaWQgMCkgcmV0dXJuIC0xO1xuICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwO1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlXG4gIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLlxuICBfLmdyb3VwQnkgPSBmdW5jdGlvbihvYmosIHZhbCkge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIgaXRlcmF0b3IgPSBfLmlzRnVuY3Rpb24odmFsKSA/IHZhbCA6IGZ1bmN0aW9uKG9iaikgeyByZXR1cm4gb2JqW3ZhbF07IH07XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgdmFyIGtleSA9IGl0ZXJhdG9yKHZhbHVlLCBpbmRleCk7XG4gICAgICAocmVzdWx0W2tleV0gfHwgKHJlc3VsdFtrZXldID0gW10pKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCBhdCB3aGF0IGluZGV4IGFuIG9iamVjdCBzaG91bGRcbiAgLy8gYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdG9yKSB7XG4gICAgaXRlcmF0b3IgfHwgKGl0ZXJhdG9yID0gXy5pZGVudGl0eSk7XG4gICAgdmFyIGxvdyA9IDAsIGhpZ2ggPSBhcnJheS5sZW5ndGg7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSAobG93ICsgaGlnaCkgPj4gMTtcbiAgICAgIGl0ZXJhdG9yKGFycmF5W21pZF0pIDwgaXRlcmF0b3Iob2JqKSA/IGxvdyA9IG1pZCArIDEgOiBoaWdoID0gbWlkO1xuICAgIH1cbiAgICByZXR1cm4gbG93O1xuICB9O1xuXG4gIC8vIFNhZmVseSBjb252ZXJ0IGFueXRoaW5nIGl0ZXJhYmxlIGludG8gYSByZWFsLCBsaXZlIGFycmF5LlxuICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIW9iaikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSkgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuICAgIGlmIChfLmlzQXJndW1lbnRzKG9iaikpICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuICAgIGlmIChvYmoudG9BcnJheSAmJiBfLmlzRnVuY3Rpb24ob2JqLnRvQXJyYXkpKSByZXR1cm4gb2JqLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuXG4gIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5sZW5ndGggOiBfLmtleXMob2JqKS5sZW5ndGg7XG4gIH07XG5cbiAgLy8gQXJyYXkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgZmlyc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrXG4gIC8vIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC5cbiAgXy5maXJzdCA9IF8uaGVhZCA9IF8udGFrZSA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiAobiAhPSBudWxsKSAmJiAhZ3VhcmQgPyBzbGljZS5jYWxsKGFycmF5LCAwLCBuKSA6IGFycmF5WzBdO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2NpYWx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLiBUaGUgKipndWFyZCoqIGNoZWNrIGFsbG93cyBpdCB0byB3b3JrIHdpdGhcbiAgLy8gYF8ubWFwYC5cbiAgXy5pbml0aWFsID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIDAsIGFycmF5Lmxlbmd0aCAtICgobiA9PSBudWxsKSB8fCBndWFyZCA/IDEgOiBuKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBUaGUgKipndWFyZCoqIGNoZWNrIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKChuICE9IG51bGwpICYmICFndWFyZCkge1xuICAgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIE1hdGgubWF4KGFycmF5Lmxlbmd0aCAtIG4sIDApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgLlxuICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKmluZGV4Kiogd2lsbCByZXR1cm5cbiAgLy8gdGhlIHJlc3Qgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgZnJvbSB0aGF0IGluZGV4IG9ud2FyZC4gVGhlICoqZ3VhcmQqKlxuICAvLyBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8ucmVzdCA9IF8udGFpbCA9IGZ1bmN0aW9uKGFycmF5LCBpbmRleCwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgKGluZGV4ID09IG51bGwpIHx8IGd1YXJkID8gMSA6IGluZGV4KTtcbiAgfTtcblxuICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuXG4gIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7IHJldHVybiAhIXZhbHVlOyB9KTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb21wbGV0ZWx5IGZsYXR0ZW5lZCB2ZXJzaW9uIG9mIGFuIGFycmF5LlxuICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuICAgIHJldHVybiBfLnJlZHVjZShhcnJheSwgZnVuY3Rpb24obWVtbywgdmFsdWUpIHtcbiAgICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSByZXR1cm4gbWVtby5jb25jYXQoc2hhbGxvdyA/IHZhbHVlIDogXy5mbGF0dGVuKHZhbHVlKSk7XG4gICAgICBtZW1vW21lbW8ubGVuZ3RoXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfSwgW10pO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLlxuICBfLndpdGhvdXQgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHlcbiAgLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0b3IpIHtcbiAgICB2YXIgaW5pdGlhbCA9IGl0ZXJhdG9yID8gXy5tYXAoYXJyYXksIGl0ZXJhdG9yKSA6IGFycmF5O1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgLy8gVGhlIGBpc1NvcnRlZGAgZmxhZyBpcyBpcnJlbGV2YW50IGlmIHRoZSBhcnJheSBvbmx5IGNvbnRhaW5zIHR3byBlbGVtZW50cy5cbiAgICBpZiAoYXJyYXkubGVuZ3RoIDwgMykgaXNTb3J0ZWQgPSB0cnVlO1xuICAgIF8ucmVkdWNlKGluaXRpYWwsIGZ1bmN0aW9uIChtZW1vLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIGlmIChpc1NvcnRlZCA/IF8ubGFzdChtZW1vKSAhPT0gdmFsdWUgfHwgIW1lbW8ubGVuZ3RoIDogIV8uaW5jbHVkZShtZW1vLCB2YWx1ZSkpIHtcbiAgICAgICAgbWVtby5wdXNoKHZhbHVlKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGFycmF5W2luZGV4XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1bmlvbjogZWFjaCBkaXN0aW5jdCBlbGVtZW50IGZyb20gYWxsIG9mXG4gIC8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIF8udW5pcShfLmZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuICAvLyBwYXNzZWQtaW4gYXJyYXlzLiAoQWxpYXNlZCBhcyBcImludGVyc2VjdFwiIGZvciBiYWNrLWNvbXBhdC4pXG4gIF8uaW50ZXJzZWN0aW9uID0gXy5pbnRlcnNlY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBfLmZpbHRlcihfLnVuaXEoYXJyYXkpLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICByZXR1cm4gXy5ldmVyeShyZXN0LCBmdW5jdGlvbihvdGhlcikge1xuICAgICAgICByZXR1cm4gXy5pbmRleE9mKG90aGVyLCBpdGVtKSA+PSAwO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gXy5mbGF0dGVuKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgdHJ1ZSk7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7IHJldHVybiAhXy5pbmNsdWRlKHJlc3QsIHZhbHVlKTsgfSk7XG4gIH07XG5cbiAgLy8gWmlwIHRvZ2V0aGVyIG11bHRpcGxlIGxpc3RzIGludG8gYSBzaW5nbGUgYXJyYXkgLS0gZWxlbWVudHMgdGhhdCBzaGFyZVxuICAvLyBhbiBpbmRleCBnbyB0b2dldGhlci5cbiAgXy56aXAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB2YXIgbGVuZ3RoID0gXy5tYXgoXy5wbHVjayhhcmdzLCAnbGVuZ3RoJykpO1xuICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgcmVzdWx0c1tpXSA9IF8ucGx1Y2soYXJncywgXCJcIiArIGkpO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcGx5IHVzIHdpdGggaW5kZXhPZiAoSSdtIGxvb2tpbmcgYXQgeW91LCAqKk1TSUUqKiksXG4gIC8vIHdlIG5lZWQgdGhpcyBmdW5jdGlvbi4gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhblxuICAvLyBpdGVtIGluIGFuIGFycmF5LCBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgaW5kZXhPZmAgaWYgYXZhaWxhYmxlLlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlzU29ydGVkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiAtMTtcbiAgICB2YXIgaSwgbDtcbiAgICBpZiAoaXNTb3J0ZWQpIHtcbiAgICAgIGkgPSBfLnNvcnRlZEluZGV4KGFycmF5LCBpdGVtKTtcbiAgICAgIHJldHVybiBhcnJheVtpXSA9PT0gaXRlbSA/IGkgOiAtMTtcbiAgICB9XG4gICAgaWYgKG5hdGl2ZUluZGV4T2YgJiYgYXJyYXkuaW5kZXhPZiA9PT0gbmF0aXZlSW5kZXhPZikgcmV0dXJuIGFycmF5LmluZGV4T2YoaXRlbSk7XG4gICAgZm9yIChpID0gMCwgbCA9IGFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykgaWYgKGkgaW4gYXJyYXkgJiYgYXJyYXlbaV0gPT09IGl0ZW0pIHJldHVybiBpO1xuICAgIHJldHVybiAtMTtcbiAgfTtcblxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgbGFzdEluZGV4T2ZgIGlmIGF2YWlsYWJsZS5cbiAgXy5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uKGFycmF5LCBpdGVtKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiAtMTtcbiAgICBpZiAobmF0aXZlTGFzdEluZGV4T2YgJiYgYXJyYXkubGFzdEluZGV4T2YgPT09IG5hdGl2ZUxhc3RJbmRleE9mKSByZXR1cm4gYXJyYXkubGFzdEluZGV4T2YoaXRlbSk7XG4gICAgdmFyIGkgPSBhcnJheS5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkgaWYgKGkgaW4gYXJyYXkgJiYgYXJyYXlbaV0gPT09IGl0ZW0pIHJldHVybiBpO1xuICAgIHJldHVybiAtMTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBzdGVwID0gYXJndW1lbnRzWzJdIHx8IDE7XG5cbiAgICB2YXIgbGVuID0gTWF0aC5tYXgoTWF0aC5jZWlsKChzdG9wIC0gc3RhcnQpIC8gc3RlcCksIDApO1xuICAgIHZhciBpZHggPSAwO1xuICAgIHZhciByYW5nZSA9IG5ldyBBcnJheShsZW4pO1xuXG4gICAgd2hpbGUoaWR4IDwgbGVuKSB7XG4gICAgICByYW5nZVtpZHgrK10gPSBzdGFydDtcbiAgICAgIHN0YXJ0ICs9IHN0ZXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIChhaGVtKSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUmV1c2FibGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHByb3RvdHlwZSBzZXR0aW5nLlxuICB2YXIgY3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcbiAgLy8gb3B0aW9uYWxseSkuIEJpbmRpbmcgd2l0aCBhcmd1bWVudHMgaXMgYWxzbyBrbm93biBhcyBgY3VycnlgLlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWYgYXZhaWxhYmxlLlxuICAvLyBXZSBjaGVjayBmb3IgYGZ1bmMuYmluZGAgZmlyc3QsIHRvIGZhaWwgZmFzdCB3aGVuIGBmdW5jYCBpcyB1bmRlZmluZWQuXG4gIF8uYmluZCA9IGZ1bmN0aW9uIGJpbmQoZnVuYywgY29udGV4dCkge1xuICAgIHZhciBib3VuZCwgYXJncztcbiAgICBpZiAoZnVuYy5iaW5kID09PSBuYXRpdmVCaW5kICYmIG5hdGl2ZUJpbmQpIHJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gYm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkpIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgY3Rvci5wcm90b3R5cGUgPSBmdW5jLnByb3RvdHlwZTtcbiAgICAgIHZhciBzZWxmID0gbmV3IGN0b3I7XG4gICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseShzZWxmLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIGlmIChPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcbiAgfTtcblxuICAvLyBCaW5kIGFsbCBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXRcbiAgLy8gYWxsIGNhbGxiYWNrcyBkZWZpbmVkIG9uIGFuIG9iamVjdCBiZWxvbmcgdG8gaXQuXG4gIF8uYmluZEFsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBmdW5jcyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBpZiAoZnVuY3MubGVuZ3RoID09IDApIGZ1bmNzID0gXy5mdW5jdGlvbnMob2JqKTtcbiAgICBlYWNoKGZ1bmNzLCBmdW5jdGlvbihmKSB7IG9ialtmXSA9IF8uYmluZChvYmpbZl0sIG9iaik7IH0pO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW8gPSB7fTtcbiAgICBoYXNoZXIgfHwgKGhhc2hlciA9IF8uaWRlbnRpdHkpO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBrZXkgPSBoYXNoZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBfLmhhcyhtZW1vLCBrZXkpID8gbWVtb1trZXldIDogKG1lbW9ba2V5XSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpeyByZXR1cm4gZnVuYy5hcHBseShudWxsLCBhcmdzKTsgfSwgd2FpdCk7XG4gIH07XG5cbiAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzXG4gIC8vIGNsZWFyZWQuXG4gIF8uZGVmZXIgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIF8uZGVsYXkuYXBwbHkoXywgW2Z1bmMsIDFdLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuXG4gIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgdmFyIGNvbnRleHQsIGFyZ3MsIHRpbWVvdXQsIHRocm90dGxpbmcsIG1vcmUsIHJlc3VsdDtcbiAgICB2YXIgd2hlbkRvbmUgPSBfLmRlYm91bmNlKGZ1bmN0aW9uKCl7IG1vcmUgPSB0aHJvdHRsaW5nID0gZmFsc2U7IH0sIHdhaXQpO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRleHQgPSB0aGlzOyBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAobW9yZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgd2hlbkRvbmUoKTtcbiAgICAgIH07XG4gICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmICh0aHJvdHRsaW5nKSB7XG4gICAgICAgIG1vcmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIHdoZW5Eb25lKCk7XG4gICAgICB0aHJvdHRsaW5nID0gdHJ1ZTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dDtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgfTtcbiAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGF0IG1vc3Qgb25lIHRpbWUsIG5vIG1hdHRlciBob3dcbiAgLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi5cbiAgXy5vbmNlID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciByYW4gPSBmYWxzZSwgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocmFuKSByZXR1cm4gbWVtbztcbiAgICAgIHJhbiA9IHRydWU7XG4gICAgICByZXR1cm4gbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IFtmdW5jXS5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgdGhlIGNvbXBvc2l0aW9uIG9mIGEgbGlzdCBvZiBmdW5jdGlvbnMsIGVhY2hcbiAgLy8gY29uc3VtaW5nIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cbiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZ1bmNzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgZm9yICh2YXIgaSA9IGZ1bmNzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGFyZ3MgPSBbZnVuY3NbaV0uYXBwbHkodGhpcywgYXJncyldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFyZ3NbMF07XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYWZ0ZXIgYmVpbmcgY2FsbGVkIE4gdGltZXMuXG4gIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIGlmICh0aW1lcyA8PSAwKSByZXR1cm4gZnVuYygpO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzIDwgMSkgeyByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBPYmplY3QgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYFxuICBfLmtleXMgPSBuYXRpdmVLZXlzIHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogIT09IE9iamVjdChvYmopKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG9iamVjdCcpO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKF8uaGFzKG9iaiwga2V5KSkga2V5c1trZXlzLmxlbmd0aF0gPSBrZXk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHNvcnRlZCBsaXN0IG9mIHRoZSBmdW5jdGlvbiBuYW1lcyBhdmFpbGFibGUgb24gdGhlIG9iamVjdC5cbiAgLy8gQWxpYXNlZCBhcyBgbWV0aG9kc2BcbiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuICB9O1xuXG4gIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuICBfLmV4dGVuZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGVhY2goc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG4gICAgICAgIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ucGljayA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBlYWNoKF8uZmxhdHRlbihzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpLCBmdW5jdGlvbihrZXkpIHtcbiAgICAgIGlmIChrZXkgaW4gb2JqKSByZXN1bHRba2V5XSA9IG9ialtrZXldO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gRmlsbCBpbiBhIGdpdmVuIG9iamVjdCB3aXRoIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgXy5kZWZhdWx0cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGVhY2goc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChvYmpbcHJvcF0gPT0gbnVsbCkgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LlxuICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTtcbiAgfTtcblxuICAvLyBJbnZva2VzIGludGVyY2VwdG9yIHdpdGggdGhlIG9iaiwgYW5kIHRoZW4gcmV0dXJucyBvYmouXG4gIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kIGNoYWluLCBpblxuICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cbiAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7XG4gICAgaW50ZXJjZXB0b3Iob2JqKTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uLlxuICBmdW5jdGlvbiBlcShhLCBiLCBzdGFjaykge1xuICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC5cbiAgICAvLyBTZWUgdGhlIEhhcm1vbnkgYGVnYWxgIHByb3Bvc2FsOiBodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwuXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09IDEgLyBiO1xuICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG4gICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG4gICAgaWYgKGEuX2NoYWluKSBhID0gYS5fd3JhcHBlZDtcbiAgICBpZiAoYi5fY2hhaW4pIGIgPSBiLl93cmFwcGVkO1xuICAgIC8vIEludm9rZSBhIGN1c3RvbSBgaXNFcXVhbGAgbWV0aG9kIGlmIG9uZSBpcyBwcm92aWRlZC5cbiAgICBpZiAoYS5pc0VxdWFsICYmIF8uaXNGdW5jdGlvbihhLmlzRXF1YWwpKSByZXR1cm4gYS5pc0VxdWFsKGIpO1xuICAgIGlmIChiLmlzRXF1YWwgJiYgXy5pc0Z1bmN0aW9uKGIuaXNFcXVhbCkpIHJldHVybiBiLmlzRXF1YWwoYSk7XG4gICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cbiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBpZiAoY2xhc3NOYW1lICE9IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTtcbiAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuXG4gICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAvLyBQcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCB3cmFwcGVycyBhcmUgZXF1aXZhbGVudDsgdGh1cywgYFwiNVwiYCBpc1xuICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG4gICAgICAgIHJldHVybiBhID09IFN0cmluZyhiKTtcbiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuIEFuIGBlZ2FsYCBjb21wYXJpc29uIGlzIHBlcmZvcm1lZCBmb3JcbiAgICAgICAgLy8gb3RoZXIgbnVtZXJpYyB2YWx1ZXMuXG4gICAgICAgIHJldHVybiBhICE9ICthID8gYiAhPSArYiA6IChhID09IDAgPyAxIC8gYSA9PSAxIC8gYiA6IGEgPT0gK2IpO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09ICtiO1xuICAgICAgLy8gUmVnRXhwcyBhcmUgY29tcGFyZWQgYnkgdGhlaXIgc291cmNlIHBhdHRlcm5zIGFuZCBmbGFncy5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAgIHJldHVybiBhLnNvdXJjZSA9PSBiLnNvdXJjZSAmJlxuICAgICAgICAgICAgICAgYS5nbG9iYWwgPT0gYi5nbG9iYWwgJiZcbiAgICAgICAgICAgICAgIGEubXVsdGlsaW5lID09IGIubXVsdGlsaW5lICYmXG4gICAgICAgICAgICAgICBhLmlnbm9yZUNhc2UgPT0gYi5pZ25vcmVDYXNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcbiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljXG4gICAgLy8gc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AuXG4gICAgdmFyIGxlbmd0aCA9IHN0YWNrLmxlbmd0aDtcbiAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgIC8vIExpbmVhciBzZWFyY2guIFBlcmZvcm1hbmNlIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZlxuICAgICAgLy8gdW5pcXVlIG5lc3RlZCBzdHJ1Y3R1cmVzLlxuICAgICAgaWYgKHN0YWNrW2xlbmd0aF0gPT0gYSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIEFkZCB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBzdGFjay5wdXNoKGEpO1xuICAgIHZhciBzaXplID0gMCwgcmVzdWx0ID0gdHJ1ZTtcbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoY2xhc3NOYW1lID09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIC8vIENvbXBhcmUgYXJyYXkgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5LlxuICAgICAgc2l6ZSA9IGEubGVuZ3RoO1xuICAgICAgcmVzdWx0ID0gc2l6ZSA9PSBiLmxlbmd0aDtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgLy8gRGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcy5cbiAgICAgICAgd2hpbGUgKHNpemUtLSkge1xuICAgICAgICAgIC8vIEVuc3VyZSBjb21tdXRhdGl2ZSBlcXVhbGl0eSBmb3Igc3BhcnNlIGFycmF5cy5cbiAgICAgICAgICBpZiAoIShyZXN1bHQgPSBzaXplIGluIGEgPT0gc2l6ZSBpbiBiICYmIGVxKGFbc2l6ZV0sIGJbc2l6ZV0sIHN0YWNrKSkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgIGlmICgnY29uc3RydWN0b3InIGluIGEgIT0gJ2NvbnN0cnVjdG9yJyBpbiBiIHx8IGEuY29uc3RydWN0b3IgIT0gYi5jb25zdHJ1Y3RvcikgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gRGVlcCBjb21wYXJlIG9iamVjdHMuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gYSkge1xuICAgICAgICBpZiAoXy5oYXMoYSwga2V5KSkge1xuICAgICAgICAgIC8vIENvdW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcHJvcGVydGllcy5cbiAgICAgICAgICBzaXplKys7XG4gICAgICAgICAgLy8gRGVlcCBjb21wYXJlIGVhY2ggbWVtYmVyLlxuICAgICAgICAgIGlmICghKHJlc3VsdCA9IF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIHN0YWNrKSkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBFbnN1cmUgdGhhdCBib3RoIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllcy5cbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gYikge1xuICAgICAgICAgIGlmIChfLmhhcyhiLCBrZXkpICYmICEoc2l6ZS0tKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gIXNpemU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIHN0YWNrLnBvcCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiLCBbXSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSkgcmV0dXJuIG9iai5sZW5ndGggPT09IDA7XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKF8uaGFzKG9iaiwga2V5KSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIGFuIG9iamVjdD9cbiAgXy5pc09iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IE9iamVjdChvYmopO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gYXJndW1lbnRzIG9iamVjdD9cbiAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG4gIH07XG4gIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7XG4gICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuICEhKG9iaiAmJiBfLmhhcyhvYmosICdjYWxsZWUnKSk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBmdW5jdGlvbj9cbiAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBzdHJpbmc/XG4gIF8uaXNTdHJpbmcgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09ICdbb2JqZWN0IFN0cmluZ10nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBudW1iZXI/XG4gIF8uaXNOdW1iZXIgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09ICdbb2JqZWN0IE51bWJlcl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gb2JqZWN0IGEgZmluaXRlIG51bWJlcj9cbiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgaXNGaW5pdGUob2JqKTtcbiAgfTtcblxuICAvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/XG4gIF8uaXNOYU4gPSBmdW5jdGlvbihvYmopIHtcbiAgICAvLyBgTmFOYCBpcyB0aGUgb25seSB2YWx1ZSBmb3Igd2hpY2ggYD09PWAgaXMgbm90IHJlZmxleGl2ZS5cbiAgICByZXR1cm4gb2JqICE9PSBvYmo7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG4gIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBCb29sZWFuXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGRhdGU/XG4gIF8uaXNEYXRlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBEYXRlXSc7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGEgcmVndWxhciBleHByZXNzaW9uP1xuICBfLmlzUmVnRXhwID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBSZWdFeHBdJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/XG4gIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gbnVsbDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIHVuZGVmaW5lZD9cbiAgXy5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHZvaWQgMDtcbiAgfTtcblxuICAvLyBIYXMgb3duIHByb3BlcnR5P1xuICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuICB9O1xuXG4gIC8vIFV0aWxpdHkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUnVuIFVuZGVyc2NvcmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYF9gIHZhcmlhYmxlIHRvIGl0c1xuICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuXyA9IHByZXZpb3VzVW5kZXJzY29yZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBLZWVwIHRoZSBpZGVudGl0eSBmdW5jdGlvbiBhcm91bmQgZm9yIGRlZmF1bHQgaXRlcmF0b3JzLlxuICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbiAobiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBpKTtcbiAgfTtcblxuICAvLyBFc2NhcGUgYSBzdHJpbmcgZm9yIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgXy5lc2NhcGUgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICByZXR1cm4gKCcnK3N0cmluZykucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKS5yZXBsYWNlKC8nL2csICcmI3gyNzsnKS5yZXBsYWNlKC9cXC8vZywnJiN4MkY7Jyk7XG4gIH07XG5cbiAgLy8gSWYgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZCBwcm9wZXJ0eSBpcyBhIGZ1bmN0aW9uIHRoZW4gaW52b2tlIGl0O1xuICAvLyBvdGhlcndpc2UsIHJldHVybiBpdC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgdmFsdWUgPSBvYmplY3RbcHJvcGVydHldO1xuICAgIHJldHVybiBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7XG4gIH07XG5cbiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LCBlbnN1cmluZyB0aGF0XG4gIC8vIHRoZXkncmUgY29ycmVjdGx5IGFkZGVkIHRvIHRoZSBPT1Agd3JhcHBlciBhcyB3ZWxsLlxuICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKXtcbiAgICAgIGFkZFRvV3JhcHBlcihuYW1lLCBfW25hbWVdID0gb2JqW25hbWVdKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLlxuICB2YXIgaWRDb3VudGVyID0gMDtcbiAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBpZCA9IGlkQ291bnRlcisrO1xuICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuICAvLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICBldmFsdWF0ZSAgICA6IC88JShbXFxzXFxTXSs/KSU+L2csXG4gICAgaW50ZXJwb2xhdGUgOiAvPCU9KFtcXHNcXFNdKz8pJT4vZyxcbiAgICBlc2NhcGUgICAgICA6IC88JS0oW1xcc1xcU10rPyklPi9nXG4gIH07XG5cbiAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhblxuICAvLyBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uIG9yIGVzY2FwaW5nIHJlZ2V4LCB3ZSBuZWVkIG9uZSB0aGF0IGlzXG4gIC8vIGd1YXJhbnRlZWQgbm90IHRvIG1hdGNoLlxuICB2YXIgbm9NYXRjaCA9IC8uXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgICdcXFxcJzogJ1xcXFwnLFxuICAgIFwiJ1wiOiBcIidcIixcbiAgICAncic6ICdcXHInLFxuICAgICduJzogJ1xcbicsXG4gICAgJ3QnOiAnXFx0JyxcbiAgICAndTIwMjgnOiAnXFx1MjAyOCcsXG4gICAgJ3UyMDI5JzogJ1xcdTIwMjknXG4gIH07XG5cbiAgZm9yICh2YXIgcCBpbiBlc2NhcGVzKSBlc2NhcGVzW2VzY2FwZXNbcF1dID0gcDtcbiAgdmFyIGVzY2FwZXIgPSAvXFxcXHwnfFxccnxcXG58XFx0fFxcdTIwMjh8XFx1MjAyOS9nO1xuICB2YXIgdW5lc2NhcGVyID0gL1xcXFwoXFxcXHwnfHJ8bnx0fHUyMDI4fHUyMDI5KS9nO1xuXG4gIC8vIFdpdGhpbiBhbiBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uLCBvciBlc2NhcGluZywgcmVtb3ZlIEhUTUwgZXNjYXBpbmdcbiAgLy8gdGhhdCBoYWQgYmVlbiBwcmV2aW91c2x5IGFkZGVkLlxuICB2YXIgdW5lc2NhcGUgPSBmdW5jdGlvbihjb2RlKSB7XG4gICAgcmV0dXJuIGNvZGUucmVwbGFjZSh1bmVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUpIHtcbiAgICAgIHJldHVybiBlc2NhcGVzW2VzY2FwZV07XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi5cbiAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLFxuICAvLyBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS5cbiAgXy50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHRleHQsIGRhdGEsIHNldHRpbmdzKSB7XG4gICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHNldHRpbmdzIHx8IHt9LCBfLnRlbXBsYXRlU2V0dGluZ3MpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCB0YWtpbmcgY2FyZSB0byBlc2NhcGUgY2hhcmFjdGVycyB0aGF0XG4gICAgLy8gY2Fubm90IGJlIGluY2x1ZGVkIGluIGEgc3RyaW5nIGxpdGVyYWwgYW5kIHRoZW4gdW5lc2NhcGUgdGhlbSBpbiBjb2RlXG4gICAgLy8gYmxvY2tzLlxuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiICsgdGV4dFxuICAgICAgLnJlcGxhY2UoZXNjYXBlciwgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuICdcXFxcJyArIGVzY2FwZXNbbWF0Y2hdO1xuICAgICAgfSlcbiAgICAgIC5yZXBsYWNlKHNldHRpbmdzLmVzY2FwZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkge1xuICAgICAgICByZXR1cm4gXCInK1xcbl8uZXNjYXBlKFwiICsgdW5lc2NhcGUoY29kZSkgKyBcIikrXFxuJ1wiO1xuICAgICAgfSlcbiAgICAgIC5yZXBsYWNlKHNldHRpbmdzLmludGVycG9sYXRlIHx8IG5vTWF0Y2gsIGZ1bmN0aW9uKG1hdGNoLCBjb2RlKSB7XG4gICAgICAgIHJldHVybiBcIicrXFxuKFwiICsgdW5lc2NhcGUoY29kZSkgKyBcIikrXFxuJ1wiO1xuICAgICAgfSlcbiAgICAgIC5yZXBsYWNlKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gsIGZ1bmN0aW9uKG1hdGNoLCBjb2RlKSB7XG4gICAgICAgIHJldHVybiBcIic7XFxuXCIgKyB1bmVzY2FwZShjb2RlKSArIFwiXFxuO19fcCs9J1wiO1xuICAgICAgfSkgKyBcIic7XFxuXCI7XG5cbiAgICAvLyBJZiBhIHZhcmlhYmxlIGlzIG5vdCBzcGVjaWZpZWQsIHBsYWNlIGRhdGEgdmFsdWVzIGluIGxvY2FsIHNjb3BlLlxuICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xcbicgKyBzb3VyY2UgKyAnfVxcbic7XG5cbiAgICBzb3VyY2UgPSBcInZhciBfX3A9Jyc7XCIgK1xuICAgICAgXCJ2YXIgcHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPUFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoYXJndW1lbnRzLCAnJyl9O1xcblwiICtcbiAgICAgIHNvdXJjZSArIFwicmV0dXJuIF9fcDtcXG5cIjtcblxuICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICBpZiAoZGF0YSkgcmV0dXJuIHJlbmRlcihkYXRhLCBfKTtcbiAgICB2YXIgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgZGF0YSwgXyk7XG4gICAgfTtcblxuICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uIHNvdXJjZSBhcyBhIGNvbnZlbmllbmNlIGZvciBidWlsZCB0aW1lXG4gICAgLy8gcHJlY29tcGlsYXRpb24uXG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyAoc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicpICsgJyl7XFxuJyArXG4gICAgICBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLCB3aGljaCB3aWxsIGRlbGVnYXRlIHRvIHRoZSB3cmFwcGVyLlxuICBfLmNoYWluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8ob2JqKS5jaGFpbigpO1xuICB9O1xuXG4gIC8vIFRoZSBPT1AgV3JhcHBlclxuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uKG9iaikgeyB0aGlzLl93cmFwcGVkID0gb2JqOyB9O1xuXG4gIC8vIEV4cG9zZSBgd3JhcHBlci5wcm90b3R5cGVgIGFzIGBfLnByb3RvdHlwZWBcbiAgXy5wcm90b3R5cGUgPSB3cmFwcGVyLnByb3RvdHlwZTtcblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udGludWUgY2hhaW5pbmcgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXG4gIHZhciByZXN1bHQgPSBmdW5jdGlvbihvYmosIGNoYWluKSB7XG4gICAgcmV0dXJuIGNoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7XG4gIH07XG5cbiAgLy8gQSBtZXRob2QgdG8gZWFzaWx5IGFkZCBmdW5jdGlvbnMgdG8gdGhlIE9PUCB3cmFwcGVyLlxuICB2YXIgYWRkVG9XcmFwcGVyID0gZnVuY3Rpb24obmFtZSwgZnVuYykge1xuICAgIHdyYXBwZXIucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIHVuc2hpZnQuY2FsbChhcmdzLCB0aGlzLl93cmFwcGVkKTtcbiAgICAgIHJldHVybiByZXN1bHQoZnVuYy5hcHBseShfLCBhcmdzKSwgdGhpcy5fY2hhaW4pO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQWRkIGFsbCBvZiB0aGUgVW5kZXJzY29yZSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIgb2JqZWN0LlxuICBfLm1peGluKF8pO1xuXG4gIC8vIEFkZCBhbGwgbXV0YXRvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIGVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIHdyYXBwZXIucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgd3JhcHBlZCA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkod3JhcHBlZCwgYXJndW1lbnRzKTtcbiAgICAgIHZhciBsZW5ndGggPSB3cmFwcGVkLmxlbmd0aDtcbiAgICAgIGlmICgobmFtZSA9PSAnc2hpZnQnIHx8IG5hbWUgPT0gJ3NwbGljZScpICYmIGxlbmd0aCA9PT0gMCkgZGVsZXRlIHdyYXBwZWRbMF07XG4gICAgICByZXR1cm4gcmVzdWx0KHdyYXBwZWQsIHRoaXMuX2NoYWluKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICB3cmFwcGVyLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdChtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSwgdGhpcy5fY2hhaW4pO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC5cbiAgd3JhcHBlci5wcm90b3R5cGUuY2hhaW4gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9jaGFpbiA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG4gIHdyYXBwZXIucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcbihmdW5jdGlvbigpIHtcbiAgdmFyIF8sIGh0dHAsIGh0dHBzLCBxdWVyeXN0cmluZywgcmV0cmlldmVyLCB1cmw7XG5cbiAgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcblxuICBodHRwcyA9IHJlcXVpcmUoJ2h0dHBzJyk7XG5cbiAgdXJsID0gcmVxdWlyZSgndXJsJyk7XG5cbiAgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xuXG4gIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG5cbiAgcmV0cmlldmVyID0gbnVsbDtcblxuICBleHBvcnRzLmNvbm5lY3QgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIGFwaSwgYXBpRnVuY3Rpb25zLCBiYXNlLCBiYXNlMSwgZm4sIGZ1bmN0aW9uTmFtZSwgaSwgbGVuO1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKCEoJ2FwaWtleScgaW4gb3B0aW9ucykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3Qgc3BlY2lmeSBldGhlcnBhZC1saXRlIGFwaWtleScpO1xuICAgIH1cbiAgICBhcGkgPSB7fTtcbiAgICBhcGkub3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBvcHRpb25zKTtcbiAgICAoYmFzZSA9IGFwaS5vcHRpb25zKS5ob3N0IHx8IChiYXNlLmhvc3QgPSAnbG9jYWxob3N0Jyk7XG4gICAgKGJhc2UxID0gYXBpLm9wdGlvbnMpLnBvcnQgfHwgKGJhc2UxLnBvcnQgPSA5MDAxKTtcbiAgICByZXRyaWV2ZXIgPSBodHRwO1xuICAgIGlmIChhcGkub3B0aW9ucy5wb3J0ID09PSA0NDMgfHwgYXBpLm9wdGlvbnMuc3NsKSB7XG4gICAgICByZXRyaWV2ZXIgPSBodHRwcztcbiAgICB9XG4gICAgYXBpLmNhbGwgPSBmdW5jdGlvbihmdW5jdGlvbk5hbWUsIGZ1bmN0aW9uQXJncywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBhcGlPcHRpb25zLCBjaHVua3MsIGh0dHBPcHRpb25zLCByZXEsIHJvb3RQYXRoO1xuICAgICAgcm9vdFBhdGggPSBhcGkub3B0aW9ucy5yb290UGF0aCB8fCAnL2FwaS8xLjIuMTIvJztcbiAgICAgIGFwaU9wdGlvbnMgPSBfLmV4dGVuZCh7XG4gICAgICAgICdhcGlrZXknOiB0aGlzLm9wdGlvbnMuYXBpa2V5XG4gICAgICB9LCBmdW5jdGlvbkFyZ3MpO1xuICAgICAgaHR0cE9wdGlvbnMgPSBfLmV4dGVuZCh0aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgcGF0aDogcm9vdFBhdGggKyBmdW5jdGlvbk5hbWUgKyAnPycgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoYXBpT3B0aW9ucylcbiAgICAgIH0pO1xuICAgICAgY2h1bmtzID0gW107XG4gICAgICByZXEgPSByZXRyaWV2ZXIuZ2V0KGh0dHBPcHRpb25zLCBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgcmVzLm9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHJldHVybiBjaHVua3MucHVzaChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXMub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlcnJvciwgZXJyb3IxLCByZXNwb25zZTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKGNodW5rcy5qb2luKCcnKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IxKSB7XG4gICAgICAgICAgICBlcnJvciA9IGVycm9yMTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgY29kZTogLTEsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdjYW5ub3QgcGFyc2UgdGhlIEFQSSByZXNwb25zZSdcbiAgICAgICAgICAgIH0sIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCAmJiByZXNwb25zZS5tZXNzYWdlID09PSAnb2snKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgICAgICAgICBjb2RlOiByZXNwb25zZS5jb2RlLFxuICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlXG4gICAgICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVxLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICAgICAgY29kZTogLTEsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCBlcnJvclxuICAgICAgICB9LCBudWxsKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgYXBpRnVuY3Rpb25zID0gWydjcmVhdGVHcm91cCcsICdjcmVhdGVHcm91cElmTm90RXhpc3RzRm9yJywgJ2RlbGV0ZUdyb3VwJywgJ2xpc3RQYWRzJywgJ2xpc3RBbGxQYWRzJywgJ2NyZWF0ZURpZmZIVE1MJywgJ2NyZWF0ZVBhZCcsICdjcmVhdGVHcm91cFBhZCcsICdjcmVhdGVBdXRob3InLCAnY3JlYXRlQXV0aG9ySWZOb3RFeGlzdHNGb3InLCAnbGlzdFBhZHNPZkF1dGhvcicsICdjcmVhdGVTZXNzaW9uJywgJ2RlbGV0ZVNlc3Npb24nLCAnZ2V0U2Vzc2lvbkluZm8nLCAnbGlzdFNlc3Npb25zT2ZHcm91cCcsICdsaXN0U2Vzc2lvbnNPZkF1dGhvcicsICdnZXRUZXh0JywgJ3NldFRleHQnLCAnZ2V0SFRNTCcsICdzZXRIVE1MJywgJ2dldEF0dHJpYnV0ZVBvb2wnLCAnZ2V0UmV2aXNpb25zQ291bnQnLCAnZ2V0U2F2ZWRSZXZpc2lvbnNDb3VudCcsICdsaXN0U2F2ZWRSZXZpc2lvbnMnLCAnc2F2ZVJldmlzaW9uJywgJ2dldFJldmlzaW9uQ2hhbmdlc2V0JywgJ2dldExhc3RFZGl0ZWQnLCAnZGVsZXRlUGFkJywgJ2NvcHlQYWQnLCAnbW92ZVBhZCcsICdnZXRSZWFkT25seUlEJywgJ2dldFBhZElEJywgJ3NldFB1YmxpY1N0YXR1cycsICdnZXRQdWJsaWNTdGF0dXMnLCAnc2V0UGFzc3dvcmQnLCAnaXNQYXNzd29yZFByb3RlY3RlZCcsICdsaXN0QXV0aG9yc09mUGFkJywgJ3BhZFVzZXJzQ291bnQnLCAnZ2V0QXV0aG9yTmFtZScsICdwYWRVc2VycycsICdzZW5kQ2xpZW50c01lc3NhZ2UnLCAnbGlzdEFsbEdyb3VwcycsICdjaGVja1Rva2VuJywgJ2FwcGVuZENoYXRNZXNzYWdlJywgJ2dldENoYXRIaXN0b3J5JywgJ2dldENoYXRIaXN0b3J5JywgJ2dldENoYXRIZWFkJywgJ3Jlc3RvcmVSZXZpc2lvbiddO1xuICAgIGZuID0gZnVuY3Rpb24oZnVuY3Rpb25OYW1lKSB7XG4gICAgICByZXR1cm4gYXBpW2Z1bmN0aW9uTmFtZV0gPSBmdW5jdGlvbihhcmdzLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBfLmlzRnVuY3Rpb24oYXJncykpIHtcbiAgICAgICAgICBjYWxsYmFjayA9IGFyZ3M7XG4gICAgICAgICAgYXJncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsYmFjayA9PSBudWxsKSB7XG4gICAgICAgICAgY2FsbGJhY2sgPSAoZnVuY3Rpb24oKSB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgYXBpLmNhbGwoZnVuY3Rpb25OYW1lLCBhcmdzLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IGFwaUZ1bmN0aW9ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgZnVuY3Rpb25OYW1lID0gYXBpRnVuY3Rpb25zW2ldO1xuICAgICAgZm4oZnVuY3Rpb25OYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIGFwaTtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGV4dGVuZCAoZGVzdGluYXRpb24pIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkgZGVzdGluYXRpb25ba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVzdGluYXRpb25cbn1cblxuZnVuY3Rpb24gcmVwZWF0IChjaGFyYWN0ZXIsIGNvdW50KSB7XG4gIHJldHVybiBBcnJheShjb3VudCArIDEpLmpvaW4oY2hhcmFjdGVyKVxufVxuXG5mdW5jdGlvbiB0cmltTGVhZGluZ05ld2xpbmVzIChzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9eXFxuKi8sICcnKVxufVxuXG5mdW5jdGlvbiB0cmltVHJhaWxpbmdOZXdsaW5lcyAoc3RyaW5nKSB7XG4gIC8vIGF2b2lkIG1hdGNoLWF0LWVuZCByZWdleHAgYm90dGxlbmVjaywgc2VlICMzNzBcbiAgdmFyIGluZGV4RW5kID0gc3RyaW5nLmxlbmd0aDtcbiAgd2hpbGUgKGluZGV4RW5kID4gMCAmJiBzdHJpbmdbaW5kZXhFbmQgLSAxXSA9PT0gJ1xcbicpIGluZGV4RW5kLS07XG4gIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4RW5kKVxufVxuXG52YXIgYmxvY2tFbGVtZW50cyA9IFtcbiAgJ0FERFJFU1MnLCAnQVJUSUNMRScsICdBU0lERScsICdBVURJTycsICdCTE9DS1FVT1RFJywgJ0JPRFknLCAnQ0FOVkFTJyxcbiAgJ0NFTlRFUicsICdERCcsICdESVInLCAnRElWJywgJ0RMJywgJ0RUJywgJ0ZJRUxEU0VUJywgJ0ZJR0NBUFRJT04nLCAnRklHVVJFJyxcbiAgJ0ZPT1RFUicsICdGT1JNJywgJ0ZSQU1FU0VUJywgJ0gxJywgJ0gyJywgJ0gzJywgJ0g0JywgJ0g1JywgJ0g2JywgJ0hFQURFUicsXG4gICdIR1JPVVAnLCAnSFInLCAnSFRNTCcsICdJU0lOREVYJywgJ0xJJywgJ01BSU4nLCAnTUVOVScsICdOQVYnLCAnTk9GUkFNRVMnLFxuICAnTk9TQ1JJUFQnLCAnT0wnLCAnT1VUUFVUJywgJ1AnLCAnUFJFJywgJ1NFQ1RJT04nLCAnVEFCTEUnLCAnVEJPRFknLCAnVEQnLFxuICAnVEZPT1QnLCAnVEgnLCAnVEhFQUQnLCAnVFInLCAnVUwnXG5dO1xuXG5mdW5jdGlvbiBpc0Jsb2NrIChub2RlKSB7XG4gIHJldHVybiBpcyhub2RlLCBibG9ja0VsZW1lbnRzKVxufVxuXG52YXIgdm9pZEVsZW1lbnRzID0gW1xuICAnQVJFQScsICdCQVNFJywgJ0JSJywgJ0NPTCcsICdDT01NQU5EJywgJ0VNQkVEJywgJ0hSJywgJ0lNRycsICdJTlBVVCcsXG4gICdLRVlHRU4nLCAnTElOSycsICdNRVRBJywgJ1BBUkFNJywgJ1NPVVJDRScsICdUUkFDSycsICdXQlInXG5dO1xuXG5mdW5jdGlvbiBpc1ZvaWQgKG5vZGUpIHtcbiAgcmV0dXJuIGlzKG5vZGUsIHZvaWRFbGVtZW50cylcbn1cblxuZnVuY3Rpb24gaGFzVm9pZCAobm9kZSkge1xuICByZXR1cm4gaGFzKG5vZGUsIHZvaWRFbGVtZW50cylcbn1cblxudmFyIG1lYW5pbmdmdWxXaGVuQmxhbmtFbGVtZW50cyA9IFtcbiAgJ0EnLCAnVEFCTEUnLCAnVEhFQUQnLCAnVEJPRFknLCAnVEZPT1QnLCAnVEgnLCAnVEQnLCAnSUZSQU1FJywgJ1NDUklQVCcsXG4gICdBVURJTycsICdWSURFTydcbl07XG5cbmZ1bmN0aW9uIGlzTWVhbmluZ2Z1bFdoZW5CbGFuayAobm9kZSkge1xuICByZXR1cm4gaXMobm9kZSwgbWVhbmluZ2Z1bFdoZW5CbGFua0VsZW1lbnRzKVxufVxuXG5mdW5jdGlvbiBoYXNNZWFuaW5nZnVsV2hlbkJsYW5rIChub2RlKSB7XG4gIHJldHVybiBoYXMobm9kZSwgbWVhbmluZ2Z1bFdoZW5CbGFua0VsZW1lbnRzKVxufVxuXG5mdW5jdGlvbiBpcyAobm9kZSwgdGFnTmFtZXMpIHtcbiAgcmV0dXJuIHRhZ05hbWVzLmluZGV4T2Yobm9kZS5ub2RlTmFtZSkgPj0gMFxufVxuXG5mdW5jdGlvbiBoYXMgKG5vZGUsIHRhZ05hbWVzKSB7XG4gIHJldHVybiAoXG4gICAgbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSAmJlxuICAgIHRhZ05hbWVzLnNvbWUoZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgIHJldHVybiBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpLmxlbmd0aFxuICAgIH0pXG4gIClcbn1cblxudmFyIHJ1bGVzID0ge307XG5cbnJ1bGVzLnBhcmFncmFwaCA9IHtcbiAgZmlsdGVyOiAncCcsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgcmV0dXJuICdcXG5cXG4nICsgY29udGVudCArICdcXG5cXG4nXG4gIH1cbn07XG5cbnJ1bGVzLmxpbmVCcmVhayA9IHtcbiAgZmlsdGVyOiAnYnInLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBvcHRpb25zLmJyICsgJ1xcbidcbiAgfVxufTtcblxucnVsZXMuaGVhZGluZyA9IHtcbiAgZmlsdGVyOiBbJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2J10sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIGhMZXZlbCA9IE51bWJlcihub2RlLm5vZGVOYW1lLmNoYXJBdCgxKSk7XG5cbiAgICBpZiAob3B0aW9ucy5oZWFkaW5nU3R5bGUgPT09ICdzZXRleHQnICYmIGhMZXZlbCA8IDMpIHtcbiAgICAgIHZhciB1bmRlcmxpbmUgPSByZXBlYXQoKGhMZXZlbCA9PT0gMSA/ICc9JyA6ICctJyksIGNvbnRlbnQubGVuZ3RoKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICdcXG5cXG4nICsgY29udGVudCArICdcXG4nICsgdW5kZXJsaW5lICsgJ1xcblxcbidcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdcXG5cXG4nICsgcmVwZWF0KCcjJywgaExldmVsKSArICcgJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICAgIH1cbiAgfVxufTtcblxucnVsZXMuYmxvY2txdW90ZSA9IHtcbiAgZmlsdGVyOiAnYmxvY2txdW90ZScsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXlxcbit8XFxuKyQvZywgJycpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL14vZ20sICc+ICcpO1xuICAgIHJldHVybiAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICB9XG59O1xuXG5ydWxlcy5saXN0ID0ge1xuICBmaWx0ZXI6IFsndWwnLCAnb2wnXSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUpIHtcbiAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQubm9kZU5hbWUgPT09ICdMSScgJiYgcGFyZW50Lmxhc3RFbGVtZW50Q2hpbGQgPT09IG5vZGUpIHtcbiAgICAgIHJldHVybiAnXFxuJyArIGNvbnRlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdcXG5cXG4nICsgY29udGVudCArICdcXG5cXG4nXG4gICAgfVxuICB9XG59O1xuXG5ydWxlcy5saXN0SXRlbSA9IHtcbiAgZmlsdGVyOiAnbGknLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIGNvbnRlbnQgPSBjb250ZW50XG4gICAgICAucmVwbGFjZSgvXlxcbisvLCAnJykgLy8gcmVtb3ZlIGxlYWRpbmcgbmV3bGluZXNcbiAgICAgIC5yZXBsYWNlKC9cXG4rJC8sICdcXG4nKSAvLyByZXBsYWNlIHRyYWlsaW5nIG5ld2xpbmVzIHdpdGgganVzdCBhIHNpbmdsZSBvbmVcbiAgICAgIC5yZXBsYWNlKC9cXG4vZ20sICdcXG4gICAgJyk7IC8vIGluZGVudFxuICAgIHZhciBwcmVmaXggPSBvcHRpb25zLmJ1bGxldExpc3RNYXJrZXIgKyAnICAgJztcbiAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQubm9kZU5hbWUgPT09ICdPTCcpIHtcbiAgICAgIHZhciBzdGFydCA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0Jyk7XG4gICAgICB2YXIgaW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHBhcmVudC5jaGlsZHJlbiwgbm9kZSk7XG4gICAgICBwcmVmaXggPSAoc3RhcnQgPyBOdW1iZXIoc3RhcnQpICsgaW5kZXggOiBpbmRleCArIDEpICsgJy4gICc7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICBwcmVmaXggKyBjb250ZW50ICsgKG5vZGUubmV4dFNpYmxpbmcgJiYgIS9cXG4kLy50ZXN0KGNvbnRlbnQpID8gJ1xcbicgOiAnJylcbiAgICApXG4gIH1cbn07XG5cbnJ1bGVzLmluZGVudGVkQ29kZUJsb2NrID0ge1xuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG9wdGlvbnMuY29kZUJsb2NrU3R5bGUgPT09ICdpbmRlbnRlZCcgJiZcbiAgICAgIG5vZGUubm9kZU5hbWUgPT09ICdQUkUnICYmXG4gICAgICBub2RlLmZpcnN0Q2hpbGQgJiZcbiAgICAgIG5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZSA9PT0gJ0NPREUnXG4gICAgKVxuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiAoXG4gICAgICAnXFxuXFxuICAgICcgK1xuICAgICAgbm9kZS5maXJzdENoaWxkLnRleHRDb250ZW50LnJlcGxhY2UoL1xcbi9nLCAnXFxuICAgICcpICtcbiAgICAgICdcXG5cXG4nXG4gICAgKVxuICB9XG59O1xuXG5ydWxlcy5mZW5jZWRDb2RlQmxvY2sgPSB7XG4gIGZpbHRlcjogZnVuY3Rpb24gKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgb3B0aW9ucy5jb2RlQmxvY2tTdHlsZSA9PT0gJ2ZlbmNlZCcgJiZcbiAgICAgIG5vZGUubm9kZU5hbWUgPT09ICdQUkUnICYmXG4gICAgICBub2RlLmZpcnN0Q2hpbGQgJiZcbiAgICAgIG5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZSA9PT0gJ0NPREUnXG4gICAgKVxuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHZhciBjbGFzc05hbWUgPSBub2RlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnO1xuICAgIHZhciBsYW5ndWFnZSA9IChjbGFzc05hbWUubWF0Y2goL2xhbmd1YWdlLShcXFMrKS8pIHx8IFtudWxsLCAnJ10pWzFdO1xuICAgIHZhciBjb2RlID0gbm9kZS5maXJzdENoaWxkLnRleHRDb250ZW50O1xuXG4gICAgdmFyIGZlbmNlQ2hhciA9IG9wdGlvbnMuZmVuY2UuY2hhckF0KDApO1xuICAgIHZhciBmZW5jZVNpemUgPSAzO1xuICAgIHZhciBmZW5jZUluQ29kZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnXicgKyBmZW5jZUNoYXIgKyAnezMsfScsICdnbScpO1xuXG4gICAgdmFyIG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBmZW5jZUluQ29kZVJlZ2V4LmV4ZWMoY29kZSkpKSB7XG4gICAgICBpZiAobWF0Y2hbMF0ubGVuZ3RoID49IGZlbmNlU2l6ZSkge1xuICAgICAgICBmZW5jZVNpemUgPSBtYXRjaFswXS5sZW5ndGggKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmZW5jZSA9IHJlcGVhdChmZW5jZUNoYXIsIGZlbmNlU2l6ZSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgJ1xcblxcbicgKyBmZW5jZSArIGxhbmd1YWdlICsgJ1xcbicgK1xuICAgICAgY29kZS5yZXBsYWNlKC9cXG4kLywgJycpICtcbiAgICAgICdcXG4nICsgZmVuY2UgKyAnXFxuXFxuJ1xuICAgIClcbiAgfVxufTtcblxucnVsZXMuaG9yaXpvbnRhbFJ1bGUgPSB7XG4gIGZpbHRlcjogJ2hyJyxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gJ1xcblxcbicgKyBvcHRpb25zLmhyICsgJ1xcblxcbidcbiAgfVxufTtcblxucnVsZXMuaW5saW5lTGluayA9IHtcbiAgZmlsdGVyOiBmdW5jdGlvbiAobm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiAoXG4gICAgICBvcHRpb25zLmxpbmtTdHlsZSA9PT0gJ2lubGluZWQnICYmXG4gICAgICBub2RlLm5vZGVOYW1lID09PSAnQScgJiZcbiAgICAgIG5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJylcbiAgICApXG4gIH0sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIGhyZWYgPSBub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIHZhciB0aXRsZSA9IGNsZWFuQXR0cmlidXRlKG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICBpZiAodGl0bGUpIHRpdGxlID0gJyBcIicgKyB0aXRsZSArICdcIic7XG4gICAgcmV0dXJuICdbJyArIGNvbnRlbnQgKyAnXSgnICsgaHJlZiArIHRpdGxlICsgJyknXG4gIH1cbn07XG5cbnJ1bGVzLnJlZmVyZW5jZUxpbmsgPSB7XG4gIGZpbHRlcjogZnVuY3Rpb24gKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgb3B0aW9ucy5saW5rU3R5bGUgPT09ICdyZWZlcmVuY2VkJyAmJlxuICAgICAgbm9kZS5ub2RlTmFtZSA9PT0gJ0EnICYmXG4gICAgICBub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpXG4gICAgKVxuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHZhciBocmVmID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICB2YXIgdGl0bGUgPSBjbGVhbkF0dHJpYnV0ZShub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgaWYgKHRpdGxlKSB0aXRsZSA9ICcgXCInICsgdGl0bGUgKyAnXCInO1xuICAgIHZhciByZXBsYWNlbWVudDtcbiAgICB2YXIgcmVmZXJlbmNlO1xuXG4gICAgc3dpdGNoIChvcHRpb25zLmxpbmtSZWZlcmVuY2VTdHlsZSkge1xuICAgICAgY2FzZSAnY29sbGFwc2VkJzpcbiAgICAgICAgcmVwbGFjZW1lbnQgPSAnWycgKyBjb250ZW50ICsgJ11bXSc7XG4gICAgICAgIHJlZmVyZW5jZSA9ICdbJyArIGNvbnRlbnQgKyAnXTogJyArIGhyZWYgKyB0aXRsZTtcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Nob3J0Y3V0JzpcbiAgICAgICAgcmVwbGFjZW1lbnQgPSAnWycgKyBjb250ZW50ICsgJ10nO1xuICAgICAgICByZWZlcmVuY2UgPSAnWycgKyBjb250ZW50ICsgJ106ICcgKyBocmVmICsgdGl0bGU7XG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgaWQgPSB0aGlzLnJlZmVyZW5jZXMubGVuZ3RoICsgMTtcbiAgICAgICAgcmVwbGFjZW1lbnQgPSAnWycgKyBjb250ZW50ICsgJ11bJyArIGlkICsgJ10nO1xuICAgICAgICByZWZlcmVuY2UgPSAnWycgKyBpZCArICddOiAnICsgaHJlZiArIHRpdGxlO1xuICAgIH1cblxuICAgIHRoaXMucmVmZXJlbmNlcy5wdXNoKHJlZmVyZW5jZSk7XG4gICAgcmV0dXJuIHJlcGxhY2VtZW50XG4gIH0sXG5cbiAgcmVmZXJlbmNlczogW10sXG5cbiAgYXBwZW5kOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciByZWZlcmVuY2VzID0gJyc7XG4gICAgaWYgKHRoaXMucmVmZXJlbmNlcy5sZW5ndGgpIHtcbiAgICAgIHJlZmVyZW5jZXMgPSAnXFxuXFxuJyArIHRoaXMucmVmZXJlbmNlcy5qb2luKCdcXG4nKSArICdcXG5cXG4nO1xuICAgICAgdGhpcy5yZWZlcmVuY2VzID0gW107IC8vIFJlc2V0IHJlZmVyZW5jZXNcbiAgICB9XG4gICAgcmV0dXJuIHJlZmVyZW5jZXNcbiAgfVxufTtcblxucnVsZXMuZW1waGFzaXMgPSB7XG4gIGZpbHRlcjogWydlbScsICdpJ10sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkgcmV0dXJuICcnXG4gICAgcmV0dXJuIG9wdGlvbnMuZW1EZWxpbWl0ZXIgKyBjb250ZW50ICsgb3B0aW9ucy5lbURlbGltaXRlclxuICB9XG59O1xuXG5ydWxlcy5zdHJvbmcgPSB7XG4gIGZpbHRlcjogWydzdHJvbmcnLCAnYiddLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJ1xuICAgIHJldHVybiBvcHRpb25zLnN0cm9uZ0RlbGltaXRlciArIGNvbnRlbnQgKyBvcHRpb25zLnN0cm9uZ0RlbGltaXRlclxuICB9XG59O1xuXG5ydWxlcy5jb2RlID0ge1xuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIGhhc1NpYmxpbmdzID0gbm9kZS5wcmV2aW91c1NpYmxpbmcgfHwgbm9kZS5uZXh0U2libGluZztcbiAgICB2YXIgaXNDb2RlQmxvY2sgPSBub2RlLnBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdQUkUnICYmICFoYXNTaWJsaW5ncztcblxuICAgIHJldHVybiBub2RlLm5vZGVOYW1lID09PSAnQ09ERScgJiYgIWlzQ29kZUJsb2NrXG4gIH0sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gJydcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXHI/XFxufFxcci9nLCAnICcpO1xuXG4gICAgdmFyIGV4dHJhU3BhY2UgPSAvXmB8XiAuKj9bXiBdLiogJHxgJC8udGVzdChjb250ZW50KSA/ICcgJyA6ICcnO1xuICAgIHZhciBkZWxpbWl0ZXIgPSAnYCc7XG4gICAgdmFyIG1hdGNoZXMgPSBjb250ZW50Lm1hdGNoKC9gKy9nbSkgfHwgW107XG4gICAgd2hpbGUgKG1hdGNoZXMuaW5kZXhPZihkZWxpbWl0ZXIpICE9PSAtMSkgZGVsaW1pdGVyID0gZGVsaW1pdGVyICsgJ2AnO1xuXG4gICAgcmV0dXJuIGRlbGltaXRlciArIGV4dHJhU3BhY2UgKyBjb250ZW50ICsgZXh0cmFTcGFjZSArIGRlbGltaXRlclxuICB9XG59O1xuXG5ydWxlcy5pbWFnZSA9IHtcbiAgZmlsdGVyOiAnaW1nJyxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUpIHtcbiAgICB2YXIgYWx0ID0gY2xlYW5BdHRyaWJ1dGUobm9kZS5nZXRBdHRyaWJ1dGUoJ2FsdCcpKTtcbiAgICB2YXIgc3JjID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ3NyYycpIHx8ICcnO1xuICAgIHZhciB0aXRsZSA9IGNsZWFuQXR0cmlidXRlKG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICB2YXIgdGl0bGVQYXJ0ID0gdGl0bGUgPyAnIFwiJyArIHRpdGxlICsgJ1wiJyA6ICcnO1xuICAgIHJldHVybiBzcmMgPyAnIVsnICsgYWx0ICsgJ10nICsgJygnICsgc3JjICsgdGl0bGVQYXJ0ICsgJyknIDogJydcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xlYW5BdHRyaWJ1dGUgKGF0dHJpYnV0ZSkge1xuICByZXR1cm4gYXR0cmlidXRlID8gYXR0cmlidXRlLnJlcGxhY2UoLyhcXG4rXFxzKikrL2csICdcXG4nKSA6ICcnXG59XG5cbi8qKlxuICogTWFuYWdlcyBhIGNvbGxlY3Rpb24gb2YgcnVsZXMgdXNlZCB0byBjb252ZXJ0IEhUTUwgdG8gTWFya2Rvd25cbiAqL1xuXG5mdW5jdGlvbiBSdWxlcyAob3B0aW9ucykge1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB0aGlzLl9rZWVwID0gW107XG4gIHRoaXMuX3JlbW92ZSA9IFtdO1xuXG4gIHRoaXMuYmxhbmtSdWxlID0ge1xuICAgIHJlcGxhY2VtZW50OiBvcHRpb25zLmJsYW5rUmVwbGFjZW1lbnRcbiAgfTtcblxuICB0aGlzLmtlZXBSZXBsYWNlbWVudCA9IG9wdGlvbnMua2VlcFJlcGxhY2VtZW50O1xuXG4gIHRoaXMuZGVmYXVsdFJ1bGUgPSB7XG4gICAgcmVwbGFjZW1lbnQ6IG9wdGlvbnMuZGVmYXVsdFJlcGxhY2VtZW50XG4gIH07XG5cbiAgdGhpcy5hcnJheSA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5ydWxlcykgdGhpcy5hcnJheS5wdXNoKG9wdGlvbnMucnVsZXNba2V5XSk7XG59XG5cblJ1bGVzLnByb3RvdHlwZSA9IHtcbiAgYWRkOiBmdW5jdGlvbiAoa2V5LCBydWxlKSB7XG4gICAgdGhpcy5hcnJheS51bnNoaWZ0KHJ1bGUpO1xuICB9LFxuXG4gIGtlZXA6IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICB0aGlzLl9rZWVwLnVuc2hpZnQoe1xuICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICByZXBsYWNlbWVudDogdGhpcy5rZWVwUmVwbGFjZW1lbnRcbiAgICB9KTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICB0aGlzLl9yZW1vdmUudW5zaGlmdCh7XG4gICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGZvck5vZGU6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUuaXNCbGFuaykgcmV0dXJuIHRoaXMuYmxhbmtSdWxlXG4gICAgdmFyIHJ1bGU7XG5cbiAgICBpZiAoKHJ1bGUgPSBmaW5kUnVsZSh0aGlzLmFycmF5LCBub2RlLCB0aGlzLm9wdGlvbnMpKSkgcmV0dXJuIHJ1bGVcbiAgICBpZiAoKHJ1bGUgPSBmaW5kUnVsZSh0aGlzLl9rZWVwLCBub2RlLCB0aGlzLm9wdGlvbnMpKSkgcmV0dXJuIHJ1bGVcbiAgICBpZiAoKHJ1bGUgPSBmaW5kUnVsZSh0aGlzLl9yZW1vdmUsIG5vZGUsIHRoaXMub3B0aW9ucykpKSByZXR1cm4gcnVsZVxuXG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdFJ1bGVcbiAgfSxcblxuICBmb3JFYWNoOiBmdW5jdGlvbiAoZm4pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXJyYXkubGVuZ3RoOyBpKyspIGZuKHRoaXMuYXJyYXlbaV0sIGkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBmaW5kUnVsZSAocnVsZXMsIG5vZGUsIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBydWxlID0gcnVsZXNbaV07XG4gICAgaWYgKGZpbHRlclZhbHVlKHJ1bGUsIG5vZGUsIG9wdGlvbnMpKSByZXR1cm4gcnVsZVxuICB9XG4gIHJldHVybiB2b2lkIDBcbn1cblxuZnVuY3Rpb24gZmlsdGVyVmFsdWUgKHJ1bGUsIG5vZGUsIG9wdGlvbnMpIHtcbiAgdmFyIGZpbHRlciA9IHJ1bGUuZmlsdGVyO1xuICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAoZmlsdGVyID09PSBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmaWx0ZXIpKSB7XG4gICAgaWYgKGZpbHRlci5pbmRleE9mKG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkgcmV0dXJuIHRydWVcbiAgfSBlbHNlIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKGZpbHRlci5jYWxsKHJ1bGUsIG5vZGUsIG9wdGlvbnMpKSByZXR1cm4gdHJ1ZVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2BmaWx0ZXJgIG5lZWRzIHRvIGJlIGEgc3RyaW5nLCBhcnJheSwgb3IgZnVuY3Rpb24nKVxuICB9XG59XG5cbi8qKlxuICogVGhlIGNvbGxhcHNlV2hpdGVzcGFjZSBmdW5jdGlvbiBpcyBhZGFwdGVkIGZyb20gY29sbGFwc2Utd2hpdGVzcGFjZVxuICogYnkgTHVjIFRoZXZlbmFyZC5cbiAqXG4gKiBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgTHVjIFRoZXZlbmFyZCA8bHVjdGhldmVuYXJkQGdtYWlsLmNvbT5cbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICogVEhFIFNPRlRXQVJFLlxuICovXG5cbi8qKlxuICogY29sbGFwc2VXaGl0ZXNwYWNlKG9wdGlvbnMpIHJlbW92ZXMgZXh0cmFuZW91cyB3aGl0ZXNwYWNlIGZyb20gYW4gdGhlIGdpdmVuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gY29sbGFwc2VXaGl0ZXNwYWNlIChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50O1xuICB2YXIgaXNCbG9jayA9IG9wdGlvbnMuaXNCbG9jaztcbiAgdmFyIGlzVm9pZCA9IG9wdGlvbnMuaXNWb2lkO1xuICB2YXIgaXNQcmUgPSBvcHRpb25zLmlzUHJlIHx8IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT09ICdQUkUnXG4gIH07XG5cbiAgaWYgKCFlbGVtZW50LmZpcnN0Q2hpbGQgfHwgaXNQcmUoZWxlbWVudCkpIHJldHVyblxuXG4gIHZhciBwcmV2VGV4dCA9IG51bGw7XG4gIHZhciBrZWVwTGVhZGluZ1dzID0gZmFsc2U7XG5cbiAgdmFyIHByZXYgPSBudWxsO1xuICB2YXIgbm9kZSA9IG5leHQocHJldiwgZWxlbWVudCwgaXNQcmUpO1xuXG4gIHdoaWxlIChub2RlICE9PSBlbGVtZW50KSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMgfHwgbm9kZS5ub2RlVHlwZSA9PT0gNCkgeyAvLyBOb2RlLlRFWFRfTk9ERSBvciBOb2RlLkNEQVRBX1NFQ1RJT05fTk9ERVxuICAgICAgdmFyIHRleHQgPSBub2RlLmRhdGEucmVwbGFjZSgvWyBcXHJcXG5cXHRdKy9nLCAnICcpO1xuXG4gICAgICBpZiAoKCFwcmV2VGV4dCB8fCAvICQvLnRlc3QocHJldlRleHQuZGF0YSkpICYmXG4gICAgICAgICAgIWtlZXBMZWFkaW5nV3MgJiYgdGV4dFswXSA9PT0gJyAnKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cigxKTtcbiAgICAgIH1cblxuICAgICAgLy8gYHRleHRgIG1pZ2h0IGJlIGVtcHR5IGF0IHRoaXMgcG9pbnQuXG4gICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgbm9kZSA9IHJlbW92ZShub2RlKTtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgbm9kZS5kYXRhID0gdGV4dDtcblxuICAgICAgcHJldlRleHQgPSBub2RlO1xuICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkgeyAvLyBOb2RlLkVMRU1FTlRfTk9ERVxuICAgICAgaWYgKGlzQmxvY2sobm9kZSkgfHwgbm9kZS5ub2RlTmFtZSA9PT0gJ0JSJykge1xuICAgICAgICBpZiAocHJldlRleHQpIHtcbiAgICAgICAgICBwcmV2VGV4dC5kYXRhID0gcHJldlRleHQuZGF0YS5yZXBsYWNlKC8gJC8sICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByZXZUZXh0ID0gbnVsbDtcbiAgICAgICAga2VlcExlYWRpbmdXcyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc1ZvaWQobm9kZSkgfHwgaXNQcmUobm9kZSkpIHtcbiAgICAgICAgLy8gQXZvaWQgdHJpbW1pbmcgc3BhY2UgYXJvdW5kIG5vbi1ibG9jaywgbm9uLUJSIHZvaWQgZWxlbWVudHMgYW5kIGlubGluZSBQUkUuXG4gICAgICAgIHByZXZUZXh0ID0gbnVsbDtcbiAgICAgICAga2VlcExlYWRpbmdXcyA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHByZXZUZXh0KSB7XG4gICAgICAgIC8vIERyb3AgcHJvdGVjdGlvbiBpZiBzZXQgcHJldmlvdXNseS5cbiAgICAgICAga2VlcExlYWRpbmdXcyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBub2RlID0gcmVtb3ZlKG5vZGUpO1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICB2YXIgbmV4dE5vZGUgPSBuZXh0KHByZXYsIG5vZGUsIGlzUHJlKTtcbiAgICBwcmV2ID0gbm9kZTtcbiAgICBub2RlID0gbmV4dE5vZGU7XG4gIH1cblxuICBpZiAocHJldlRleHQpIHtcbiAgICBwcmV2VGV4dC5kYXRhID0gcHJldlRleHQuZGF0YS5yZXBsYWNlKC8gJC8sICcnKTtcbiAgICBpZiAoIXByZXZUZXh0LmRhdGEpIHtcbiAgICAgIHJlbW92ZShwcmV2VGV4dCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogcmVtb3ZlKG5vZGUpIHJlbW92ZXMgdGhlIGdpdmVuIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCByZXR1cm5zIHRoZVxuICogbmV4dCBub2RlIGluIHRoZSBzZXF1ZW5jZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge05vZGV9IG5vZGVcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlIChub2RlKSB7XG4gIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZyB8fCBub2RlLnBhcmVudE5vZGU7XG5cbiAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuXG4gIHJldHVybiBuZXh0XG59XG5cbi8qKlxuICogbmV4dChwcmV2LCBjdXJyZW50LCBpc1ByZSkgcmV0dXJucyB0aGUgbmV4dCBub2RlIGluIHRoZSBzZXF1ZW5jZSwgZ2l2ZW4gdGhlXG4gKiBjdXJyZW50IGFuZCBwcmV2aW91cyBub2Rlcy5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHByZXZcbiAqIEBwYXJhbSB7Tm9kZX0gY3VycmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXNQcmVcbiAqIEByZXR1cm4ge05vZGV9XG4gKi9cbmZ1bmN0aW9uIG5leHQgKHByZXYsIGN1cnJlbnQsIGlzUHJlKSB7XG4gIGlmICgocHJldiAmJiBwcmV2LnBhcmVudE5vZGUgPT09IGN1cnJlbnQpIHx8IGlzUHJlKGN1cnJlbnQpKSB7XG4gICAgcmV0dXJuIGN1cnJlbnQubmV4dFNpYmxpbmcgfHwgY3VycmVudC5wYXJlbnROb2RlXG4gIH1cblxuICByZXR1cm4gY3VycmVudC5maXJzdENoaWxkIHx8IGN1cnJlbnQubmV4dFNpYmxpbmcgfHwgY3VycmVudC5wYXJlbnROb2RlXG59XG5cbi8qXG4gKiBTZXQgdXAgd2luZG93IGZvciBOb2RlLmpzXG4gKi9cblxudmFyIHJvb3QgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB7fSk7XG5cbi8qXG4gKiBQYXJzaW5nIEhUTUwgc3RyaW5nc1xuICovXG5cbmZ1bmN0aW9uIGNhblBhcnNlSFRNTE5hdGl2ZWx5ICgpIHtcbiAgdmFyIFBhcnNlciA9IHJvb3QuRE9NUGFyc2VyO1xuICB2YXIgY2FuUGFyc2UgPSBmYWxzZTtcblxuICAvLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTEyOTAzMVxuICAvLyBGaXJlZm94L09wZXJhL0lFIHRocm93IGVycm9ycyBvbiB1bnN1cHBvcnRlZCB0eXBlc1xuICB0cnkge1xuICAgIC8vIFdlYktpdCByZXR1cm5zIG51bGwgb24gdW5zdXBwb3J0ZWQgdHlwZXNcbiAgICBpZiAobmV3IFBhcnNlcigpLnBhcnNlRnJvbVN0cmluZygnJywgJ3RleHQvaHRtbCcpKSB7XG4gICAgICBjYW5QYXJzZSA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxuXG4gIHJldHVybiBjYW5QYXJzZVxufVxuXG5mdW5jdGlvbiBjcmVhdGVIVE1MUGFyc2VyICgpIHtcbiAgdmFyIFBhcnNlciA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIHtcbiAgICBpZiAoc2hvdWxkVXNlQWN0aXZlWCgpKSB7XG4gICAgICBQYXJzZXIucHJvdG90eXBlLnBhcnNlRnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgdmFyIGRvYyA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKTtcbiAgICAgICAgZG9jLmRlc2lnbk1vZGUgPSAnb24nOyAvLyBkaXNhYmxlIG9uLXBhZ2Ugc2NyaXB0c1xuICAgICAgICBkb2Mub3BlbigpO1xuICAgICAgICBkb2Mud3JpdGUoc3RyaW5nKTtcbiAgICAgICAgZG9jLmNsb3NlKCk7XG4gICAgICAgIHJldHVybiBkb2NcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIFBhcnNlci5wcm90b3R5cGUucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICB2YXIgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKTtcbiAgICAgICAgZG9jLm9wZW4oKTtcbiAgICAgICAgZG9jLndyaXRlKHN0cmluZyk7XG4gICAgICAgIGRvYy5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gZG9jXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gUGFyc2VyXG59XG5cbmZ1bmN0aW9uIHNob3VsZFVzZUFjdGl2ZVggKCkge1xuICB2YXIgdXNlQWN0aXZlWCA9IGZhbHNlO1xuICB0cnkge1xuICAgIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJykub3BlbigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHdpbmRvdy5BY3RpdmVYT2JqZWN0KSB1c2VBY3RpdmVYID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gdXNlQWN0aXZlWFxufVxuXG52YXIgSFRNTFBhcnNlciA9IGNhblBhcnNlSFRNTE5hdGl2ZWx5KCkgPyByb290LkRPTVBhcnNlciA6IGNyZWF0ZUhUTUxQYXJzZXIoKTtcblxuZnVuY3Rpb24gUm9vdE5vZGUgKGlucHV0LCBvcHRpb25zKSB7XG4gIHZhciByb290O1xuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgIHZhciBkb2MgPSBodG1sUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKFxuICAgICAgLy8gRE9NIHBhcnNlcnMgYXJyYW5nZSBlbGVtZW50cyBpbiB0aGUgPGhlYWQ+IGFuZCA8Ym9keT4uXG4gICAgICAvLyBXcmFwcGluZyBpbiBhIGN1c3RvbSBlbGVtZW50IGVuc3VyZXMgZWxlbWVudHMgYXJlIHJlbGlhYmx5IGFycmFuZ2VkIGluXG4gICAgICAvLyBhIHNpbmdsZSBlbGVtZW50LlxuICAgICAgJzx4LXR1cm5kb3duIGlkPVwidHVybmRvd24tcm9vdFwiPicgKyBpbnB1dCArICc8L3gtdHVybmRvd24+JyxcbiAgICAgICd0ZXh0L2h0bWwnXG4gICAgKTtcbiAgICByb290ID0gZG9jLmdldEVsZW1lbnRCeUlkKCd0dXJuZG93bi1yb290Jyk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdCA9IGlucHV0LmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuICBjb2xsYXBzZVdoaXRlc3BhY2Uoe1xuICAgIGVsZW1lbnQ6IHJvb3QsXG4gICAgaXNCbG9jazogaXNCbG9jayxcbiAgICBpc1ZvaWQ6IGlzVm9pZCxcbiAgICBpc1ByZTogb3B0aW9ucy5wcmVmb3JtYXR0ZWRDb2RlID8gaXNQcmVPckNvZGUgOiBudWxsXG4gIH0pO1xuXG4gIHJldHVybiByb290XG59XG5cbnZhciBfaHRtbFBhcnNlcjtcbmZ1bmN0aW9uIGh0bWxQYXJzZXIgKCkge1xuICBfaHRtbFBhcnNlciA9IF9odG1sUGFyc2VyIHx8IG5ldyBIVE1MUGFyc2VyKCk7XG4gIHJldHVybiBfaHRtbFBhcnNlclxufVxuXG5mdW5jdGlvbiBpc1ByZU9yQ29kZSAobm9kZSkge1xuICByZXR1cm4gbm9kZS5ub2RlTmFtZSA9PT0gJ1BSRScgfHwgbm9kZS5ub2RlTmFtZSA9PT0gJ0NPREUnXG59XG5cbmZ1bmN0aW9uIE5vZGUgKG5vZGUsIG9wdGlvbnMpIHtcbiAgbm9kZS5pc0Jsb2NrID0gaXNCbG9jayhub2RlKTtcbiAgbm9kZS5pc0NvZGUgPSBub2RlLm5vZGVOYW1lID09PSAnQ09ERScgfHwgbm9kZS5wYXJlbnROb2RlLmlzQ29kZTtcbiAgbm9kZS5pc0JsYW5rID0gaXNCbGFuayhub2RlKTtcbiAgbm9kZS5mbGFua2luZ1doaXRlc3BhY2UgPSBmbGFua2luZ1doaXRlc3BhY2Uobm9kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBub2RlXG59XG5cbmZ1bmN0aW9uIGlzQmxhbmsgKG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICAhaXNWb2lkKG5vZGUpICYmXG4gICAgIWlzTWVhbmluZ2Z1bFdoZW5CbGFuayhub2RlKSAmJlxuICAgIC9eXFxzKiQvaS50ZXN0KG5vZGUudGV4dENvbnRlbnQpICYmXG4gICAgIWhhc1ZvaWQobm9kZSkgJiZcbiAgICAhaGFzTWVhbmluZ2Z1bFdoZW5CbGFuayhub2RlKVxuICApXG59XG5cbmZ1bmN0aW9uIGZsYW5raW5nV2hpdGVzcGFjZSAobm9kZSwgb3B0aW9ucykge1xuICBpZiAobm9kZS5pc0Jsb2NrIHx8IChvcHRpb25zLnByZWZvcm1hdHRlZENvZGUgJiYgbm9kZS5pc0NvZGUpKSB7XG4gICAgcmV0dXJuIHsgbGVhZGluZzogJycsIHRyYWlsaW5nOiAnJyB9XG4gIH1cblxuICB2YXIgZWRnZXMgPSBlZGdlV2hpdGVzcGFjZShub2RlLnRleHRDb250ZW50KTtcblxuICAvLyBhYmFuZG9uIGxlYWRpbmcgQVNDSUkgV1MgaWYgbGVmdC1mbGFua2VkIGJ5IEFTQ0lJIFdTXG4gIGlmIChlZGdlcy5sZWFkaW5nQXNjaWkgJiYgaXNGbGFua2VkQnlXaGl0ZXNwYWNlKCdsZWZ0Jywgbm9kZSwgb3B0aW9ucykpIHtcbiAgICBlZGdlcy5sZWFkaW5nID0gZWRnZXMubGVhZGluZ05vbkFzY2lpO1xuICB9XG5cbiAgLy8gYWJhbmRvbiB0cmFpbGluZyBBU0NJSSBXUyBpZiByaWdodC1mbGFua2VkIGJ5IEFTQ0lJIFdTXG4gIGlmIChlZGdlcy50cmFpbGluZ0FzY2lpICYmIGlzRmxhbmtlZEJ5V2hpdGVzcGFjZSgncmlnaHQnLCBub2RlLCBvcHRpb25zKSkge1xuICAgIGVkZ2VzLnRyYWlsaW5nID0gZWRnZXMudHJhaWxpbmdOb25Bc2NpaTtcbiAgfVxuXG4gIHJldHVybiB7IGxlYWRpbmc6IGVkZ2VzLmxlYWRpbmcsIHRyYWlsaW5nOiBlZGdlcy50cmFpbGluZyB9XG59XG5cbmZ1bmN0aW9uIGVkZ2VXaGl0ZXNwYWNlIChzdHJpbmcpIHtcbiAgdmFyIG0gPSBzdHJpbmcubWF0Y2goL14oKFsgXFx0XFxyXFxuXSopKFxccyopKVtcXHNcXFNdKj8oKFxccyo/KShbIFxcdFxcclxcbl0qKSkkLyk7XG4gIHJldHVybiB7XG4gICAgbGVhZGluZzogbVsxXSwgLy8gd2hvbGUgc3RyaW5nIGZvciB3aGl0ZXNwYWNlLW9ubHkgc3RyaW5nc1xuICAgIGxlYWRpbmdBc2NpaTogbVsyXSxcbiAgICBsZWFkaW5nTm9uQXNjaWk6IG1bM10sXG4gICAgdHJhaWxpbmc6IG1bNF0sIC8vIGVtcHR5IGZvciB3aGl0ZXNwYWNlLW9ubHkgc3RyaW5nc1xuICAgIHRyYWlsaW5nTm9uQXNjaWk6IG1bNV0sXG4gICAgdHJhaWxpbmdBc2NpaTogbVs2XVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzRmxhbmtlZEJ5V2hpdGVzcGFjZSAoc2lkZSwgbm9kZSwgb3B0aW9ucykge1xuICB2YXIgc2libGluZztcbiAgdmFyIHJlZ0V4cDtcbiAgdmFyIGlzRmxhbmtlZDtcblxuICBpZiAoc2lkZSA9PT0gJ2xlZnQnKSB7XG4gICAgc2libGluZyA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgIHJlZ0V4cCA9IC8gJC87XG4gIH0gZWxzZSB7XG4gICAgc2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgcmVnRXhwID0gL14gLztcbiAgfVxuXG4gIGlmIChzaWJsaW5nKSB7XG4gICAgaWYgKHNpYmxpbmcubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIGlzRmxhbmtlZCA9IHJlZ0V4cC50ZXN0KHNpYmxpbmcubm9kZVZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMucHJlZm9ybWF0dGVkQ29kZSAmJiBzaWJsaW5nLm5vZGVOYW1lID09PSAnQ09ERScpIHtcbiAgICAgIGlzRmxhbmtlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc2libGluZy5ub2RlVHlwZSA9PT0gMSAmJiAhaXNCbG9jayhzaWJsaW5nKSkge1xuICAgICAgaXNGbGFua2VkID0gcmVnRXhwLnRlc3Qoc2libGluZy50ZXh0Q29udGVudCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBpc0ZsYW5rZWRcbn1cblxudmFyIHJlZHVjZSA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2U7XG52YXIgZXNjYXBlcyA9IFtcbiAgWy9cXFxcL2csICdcXFxcXFxcXCddLFxuICBbL1xcKi9nLCAnXFxcXConXSxcbiAgWy9eLS9nLCAnXFxcXC0nXSxcbiAgWy9eXFwrIC9nLCAnXFxcXCsgJ10sXG4gIFsvXig9KykvZywgJ1xcXFwkMSddLFxuICBbL14oI3sxLDZ9KSAvZywgJ1xcXFwkMSAnXSxcbiAgWy9gL2csICdcXFxcYCddLFxuICBbL15+fn4vZywgJ1xcXFx+fn4nXSxcbiAgWy9cXFsvZywgJ1xcXFxbJ10sXG4gIFsvXFxdL2csICdcXFxcXSddLFxuICBbL14+L2csICdcXFxcPiddLFxuICBbL18vZywgJ1xcXFxfJ10sXG4gIFsvXihcXGQrKVxcLiAvZywgJyQxXFxcXC4gJ11cbl07XG5cbmZ1bmN0aW9uIFR1cm5kb3duU2VydmljZSAob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHVybmRvd25TZXJ2aWNlKSkgcmV0dXJuIG5ldyBUdXJuZG93blNlcnZpY2Uob3B0aW9ucylcblxuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgcnVsZXM6IHJ1bGVzLFxuICAgIGhlYWRpbmdTdHlsZTogJ3NldGV4dCcsXG4gICAgaHI6ICcqICogKicsXG4gICAgYnVsbGV0TGlzdE1hcmtlcjogJyonLFxuICAgIGNvZGVCbG9ja1N0eWxlOiAnaW5kZW50ZWQnLFxuICAgIGZlbmNlOiAnYGBgJyxcbiAgICBlbURlbGltaXRlcjogJ18nLFxuICAgIHN0cm9uZ0RlbGltaXRlcjogJyoqJyxcbiAgICBsaW5rU3R5bGU6ICdpbmxpbmVkJyxcbiAgICBsaW5rUmVmZXJlbmNlU3R5bGU6ICdmdWxsJyxcbiAgICBicjogJyAgJyxcbiAgICBwcmVmb3JtYXR0ZWRDb2RlOiBmYWxzZSxcbiAgICBibGFua1JlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUuaXNCbG9jayA/ICdcXG5cXG4nIDogJydcbiAgICB9LFxuICAgIGtlZXBSZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLmlzQmxvY2sgPyAnXFxuXFxuJyArIG5vZGUub3V0ZXJIVE1MICsgJ1xcblxcbicgOiBub2RlLm91dGVySFRNTFxuICAgIH0sXG4gICAgZGVmYXVsdFJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUuaXNCbG9jayA/ICdcXG5cXG4nICsgY29udGVudCArICdcXG5cXG4nIDogY29udGVudFxuICAgIH1cbiAgfTtcbiAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG4gIHRoaXMucnVsZXMgPSBuZXcgUnVsZXModGhpcy5vcHRpb25zKTtcbn1cblxuVHVybmRvd25TZXJ2aWNlLnByb3RvdHlwZSA9IHtcbiAgLyoqXG4gICAqIFRoZSBlbnRyeSBwb2ludCBmb3IgY29udmVydGluZyBhIHN0cmluZyBvciBET00gbm9kZSB0byBNYXJrZG93blxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fSBpbnB1dCBUaGUgc3RyaW5nIG9yIERPTSBub2RlIHRvIGNvbnZlcnRcbiAgICogQHJldHVybnMgQSBNYXJrZG93biByZXByZXNlbnRhdGlvbiBvZiB0aGUgaW5wdXRcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqL1xuXG4gIHR1cm5kb3duOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoIWNhbkNvbnZlcnQoaW5wdXQpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICBpbnB1dCArICcgaXMgbm90IGEgc3RyaW5nLCBvciBhbiBlbGVtZW50L2RvY3VtZW50L2ZyYWdtZW50IG5vZGUuJ1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChpbnB1dCA9PT0gJycpIHJldHVybiAnJ1xuXG4gICAgdmFyIG91dHB1dCA9IHByb2Nlc3MuY2FsbCh0aGlzLCBuZXcgUm9vdE5vZGUoaW5wdXQsIHRoaXMub3B0aW9ucykpO1xuICAgIHJldHVybiBwb3N0UHJvY2Vzcy5jYWxsKHRoaXMsIG91dHB1dClcbiAgfSxcblxuICAvKipcbiAgICogQWRkIG9uZSBvciBtb3JlIHBsdWdpbnNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBwbHVnaW4gVGhlIHBsdWdpbiBvciBhcnJheSBvZiBwbHVnaW5zIHRvIGFkZFxuICAgKiBAcmV0dXJucyBUaGUgVHVybmRvd24gaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAqIEB0eXBlIE9iamVjdFxuICAgKi9cblxuICB1c2U6IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwbHVnaW4pKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbi5sZW5ndGg7IGkrKykgdGhpcy51c2UocGx1Z2luW2ldKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBsdWdpbih0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGx1Z2luIG11c3QgYmUgYSBGdW5jdGlvbiBvciBhbiBBcnJheSBvZiBGdW5jdGlvbnMnKVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGRzIGEgcnVsZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIHVuaXF1ZSBrZXkgb2YgdGhlIHJ1bGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHJ1bGUgVGhlIHJ1bGVcbiAgICogQHJldHVybnMgVGhlIFR1cm5kb3duIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG5cbiAgYWRkUnVsZTogZnVuY3Rpb24gKGtleSwgcnVsZSkge1xuICAgIHRoaXMucnVsZXMuYWRkKGtleSwgcnVsZSk7XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICAvKipcbiAgICogS2VlcCBhIG5vZGUgKGFzIEhUTUwpIHRoYXQgbWF0Y2hlcyB0aGUgZmlsdGVyXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8RnVuY3Rpb259IGZpbHRlciBUaGUgdW5pcXVlIGtleSBvZiB0aGUgcnVsZVxuICAgKiBAcmV0dXJucyBUaGUgVHVybmRvd24gaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAqIEB0eXBlIE9iamVjdFxuICAgKi9cblxuICBrZWVwOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5ydWxlcy5rZWVwKGZpbHRlcik7XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgbm9kZSB0aGF0IG1hdGNoZXMgdGhlIGZpbHRlclxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fEZ1bmN0aW9ufSBmaWx0ZXIgVGhlIHVuaXF1ZSBrZXkgb2YgdGhlIHJ1bGVcbiAgICogQHJldHVybnMgVGhlIFR1cm5kb3duIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5ydWxlcy5yZW1vdmUoZmlsdGVyKTtcbiAgICByZXR1cm4gdGhpc1xuICB9LFxuXG4gIC8qKlxuICAgKiBFc2NhcGVzIE1hcmtkb3duIHN5bnRheFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBlc2NhcGVcbiAgICogQHJldHVybnMgQSBzdHJpbmcgd2l0aCBNYXJrZG93biBzeW50YXggZXNjYXBlZFxuICAgKiBAdHlwZSBTdHJpbmdcbiAgICovXG5cbiAgZXNjYXBlOiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIGVzY2FwZXMucmVkdWNlKGZ1bmN0aW9uIChhY2N1bXVsYXRvciwgZXNjYXBlKSB7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3IucmVwbGFjZShlc2NhcGVbMF0sIGVzY2FwZVsxXSlcbiAgICB9LCBzdHJpbmcpXG4gIH1cbn07XG5cbi8qKlxuICogUmVkdWNlcyBhIERPTSBub2RlIGRvd24gdG8gaXRzIE1hcmtkb3duIHN0cmluZyBlcXVpdmFsZW50XG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50Tm9kZSBUaGUgbm9kZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyBBIE1hcmtkb3duIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBub2RlXG4gKiBAdHlwZSBTdHJpbmdcbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzIChwYXJlbnROb2RlKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIHJlZHVjZS5jYWxsKHBhcmVudE5vZGUuY2hpbGROb2RlcywgZnVuY3Rpb24gKG91dHB1dCwgbm9kZSkge1xuICAgIG5vZGUgPSBuZXcgTm9kZShub2RlLCBzZWxmLm9wdGlvbnMpO1xuXG4gICAgdmFyIHJlcGxhY2VtZW50ID0gJyc7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIHJlcGxhY2VtZW50ID0gbm9kZS5pc0NvZGUgPyBub2RlLm5vZGVWYWx1ZSA6IHNlbGYuZXNjYXBlKG5vZGUubm9kZVZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnRGb3JOb2RlLmNhbGwoc2VsZiwgbm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpvaW4ob3V0cHV0LCByZXBsYWNlbWVudClcbiAgfSwgJycpXG59XG5cbi8qKlxuICogQXBwZW5kcyBzdHJpbmdzIGFzIGVhY2ggcnVsZSByZXF1aXJlcyBhbmQgdHJpbXMgdGhlIG91dHB1dFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBvdXRwdXQgVGhlIGNvbnZlcnNpb24gb3V0cHV0XG4gKiBAcmV0dXJucyBBIHRyaW1tZWQgdmVyc2lvbiBvZiB0aGUgb3VwdXRcbiAqIEB0eXBlIFN0cmluZ1xuICovXG5cbmZ1bmN0aW9uIHBvc3RQcm9jZXNzIChvdXRwdXQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLnJ1bGVzLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICBpZiAodHlwZW9mIHJ1bGUuYXBwZW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvdXRwdXQgPSBqb2luKG91dHB1dCwgcnVsZS5hcHBlbmQoc2VsZi5vcHRpb25zKSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gb3V0cHV0LnJlcGxhY2UoL15bXFx0XFxyXFxuXSsvLCAnJykucmVwbGFjZSgvW1xcdFxcclxcblxcc10rJC8sICcnKVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGVsZW1lbnQgbm9kZSB0byBpdHMgTWFya2Rvd24gZXF1aXZhbGVudFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgVGhlIG5vZGUgdG8gY29udmVydFxuICogQHJldHVybnMgQSBNYXJrZG93biByZXByZXNlbnRhdGlvbiBvZiB0aGUgbm9kZVxuICogQHR5cGUgU3RyaW5nXG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZW1lbnRGb3JOb2RlIChub2RlKSB7XG4gIHZhciBydWxlID0gdGhpcy5ydWxlcy5mb3JOb2RlKG5vZGUpO1xuICB2YXIgY29udGVudCA9IHByb2Nlc3MuY2FsbCh0aGlzLCBub2RlKTtcbiAgdmFyIHdoaXRlc3BhY2UgPSBub2RlLmZsYW5raW5nV2hpdGVzcGFjZTtcbiAgaWYgKHdoaXRlc3BhY2UubGVhZGluZyB8fCB3aGl0ZXNwYWNlLnRyYWlsaW5nKSBjb250ZW50ID0gY29udGVudC50cmltKCk7XG4gIHJldHVybiAoXG4gICAgd2hpdGVzcGFjZS5sZWFkaW5nICtcbiAgICBydWxlLnJlcGxhY2VtZW50KGNvbnRlbnQsIG5vZGUsIHRoaXMub3B0aW9ucykgK1xuICAgIHdoaXRlc3BhY2UudHJhaWxpbmdcbiAgKVxufVxuXG4vKipcbiAqIEpvaW5zIHJlcGxhY2VtZW50IHRvIHRoZSBjdXJyZW50IG91dHB1dCB3aXRoIGFwcHJvcHJpYXRlIG51bWJlciBvZiBuZXcgbGluZXNcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gb3V0cHV0IFRoZSBjdXJyZW50IGNvbnZlcnNpb24gb3V0cHV0XG4gKiBAcGFyYW0ge1N0cmluZ30gcmVwbGFjZW1lbnQgVGhlIHN0cmluZyB0byBhcHBlbmQgdG8gdGhlIG91dHB1dFxuICogQHJldHVybnMgSm9pbmVkIG91dHB1dFxuICogQHR5cGUgU3RyaW5nXG4gKi9cblxuZnVuY3Rpb24gam9pbiAob3V0cHV0LCByZXBsYWNlbWVudCkge1xuICB2YXIgczEgPSB0cmltVHJhaWxpbmdOZXdsaW5lcyhvdXRwdXQpO1xuICB2YXIgczIgPSB0cmltTGVhZGluZ05ld2xpbmVzKHJlcGxhY2VtZW50KTtcbiAgdmFyIG5scyA9IE1hdGgubWF4KG91dHB1dC5sZW5ndGggLSBzMS5sZW5ndGgsIHJlcGxhY2VtZW50Lmxlbmd0aCAtIHMyLmxlbmd0aCk7XG4gIHZhciBzZXBhcmF0b3IgPSAnXFxuXFxuJy5zdWJzdHJpbmcoMCwgbmxzKTtcblxuICByZXR1cm4gczEgKyBzZXBhcmF0b3IgKyBzMlxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBpbnB1dCBjYW4gYmUgY29udmVydGVkXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR9IGlucHV0IERlc2NyaWJlIHRoaXMgcGFyYW1ldGVyXG4gKiBAcmV0dXJucyBEZXNjcmliZSB3aGF0IGl0IHJldHVybnNcbiAqIEB0eXBlIFN0cmluZ3xPYmplY3R8QXJyYXl8Qm9vbGVhbnxOdW1iZXJcbiAqL1xuXG5mdW5jdGlvbiBjYW5Db252ZXJ0IChpbnB1dCkge1xuICByZXR1cm4gKFxuICAgIGlucHV0ICE9IG51bGwgJiYgKFxuICAgICAgdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fFxuICAgICAgKGlucHV0Lm5vZGVUeXBlICYmIChcbiAgICAgICAgaW5wdXQubm9kZVR5cGUgPT09IDEgfHwgaW5wdXQubm9kZVR5cGUgPT09IDkgfHwgaW5wdXQubm9kZVR5cGUgPT09IDExXG4gICAgICApKVxuICAgIClcbiAgKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFR1cm5kb3duU2VydmljZTtcbiIsICJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmxldCBldGhlcnBhZCA9IHJlcXVpcmUoJ2V0aGVycGFkLWxpdGUtY2xpZW50Jyk7XHJcbmltcG9ydCB7IHN0cmluZ2lmeVlhbWwgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5sZXQgVHVybmRvd25TZXJ2aWNlID0gcmVxdWlyZSgndHVybmRvd24nKVxyXG5cclxuVHVybmRvd25TZXJ2aWNlLnByb3RvdHlwZS5lc2NhcGUgPSAodGV4dCk9PnRleHQ7XHJcblxyXG5mdW5jdGlvbiBtYWtlaWQobGVuZ3RoKSB7XHJcbiAgbGV0IHJlc3VsdCAgICAgICAgICAgPSAnJztcclxuICBsZXQgY2hhcmFjdGVycyAgICAgICA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XHJcbiAgbGV0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcclxuICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBcclxuY2hhcmFjdGVyc0xlbmd0aCkpO1xyXG4gfVxyXG4gcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxubGV0IHRkID0gbmV3IFR1cm5kb3duU2VydmljZSgpXHJcbiAgLmFkZFJ1bGUoJ3N0cmlrZXRocm91Z2gnLCB7XHJcbiAgICBmaWx0ZXI6IFsncyddLFxyXG4gICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgIHJldHVybiAnfn4nICsgY29udGVudCArICd+fidcclxuICAgIH1cclxuICB9KVxyXG4gIC5hZGRSdWxlKCd1bmRlcmxpbmUnLCB7XHJcbiAgICBmaWx0ZXI6IFsndSddLFxyXG4gICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgIHJldHVybiAnPT0nICsgY29udGVudCArICc9PSc7XHJcbiAgICB9XHJcbiAgfSlcclxuICAuYWRkUnVsZSgnYScsIHtcclxuICAgIGZpbHRlcjogWydhJ10sXHJcbiAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xyXG4gICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbmludGVyZmFjZSBFdGhlcnBhZFNldHRpbmdzIHtcclxuICBob3N0OiBzdHJpbmc7XHJcbiAgcG9ydDogaW50O1xyXG4gIGFwaWtleTogc3RyaW5nO1xyXG4gIHJhbmRvbV9wYWRfaWQ6IGJvb2w7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEV0aGVycGFkU2V0dGluZ3MgPSB7XHJcbiAgaG9zdDogJ2xvY2FsaG9zdCcsXHJcbiAgcG9ydDogOTAwMSxcclxuICBhcGlrZXk6IFwiXCIsXHJcbiAgcmFuZG9tX3BhZF9pZDogdHJ1ZVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXRoZXJwYWQgZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIHNldHRpbmdzOiBFdGhlcnBhZFNldHRpbmdzO1xyXG5cclxuICBnZXQgZXRoZXJwYWQoKSB7XHJcbiAgICByZXR1cm4gZXRoZXJwYWQuY29ubmVjdCh7XHJcbiAgICAgIGFwaWtleTogdGhpcy5zZXR0aW5ncy5hcGlrZXksXHJcbiAgICAgIGhvc3Q6IHRoaXMuc2V0dGluZ3MuaG9zdCxcclxuICAgICAgcG9ydDogdGhpcy5zZXR0aW5ncy5wb3J0XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxyXG4gICAgLy9jb25zdCBzdGF0dXNCYXJJdGVtRWwgPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcclxuICAgIC8vc3RhdHVzQmFySXRlbUVsLnNldFRleHQoJ1N0YXR1cyBCYXIgVGV4dCcpO1xyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcclxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCBhc3luYyAobm90ZSk9PntcclxuICAgICAgICB0aGlzLnJlcGxhY2Vfbm90ZV9mcm9tX2V0aGVycGFkKG5vdGUpO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBUaGlzIGFkZHMgYW4gZWRpdG9yIGNvbW1hbmQgdGhhdCBjYW4gcGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvbiB0aGUgY3VycmVudCBlZGl0b3IgaW5zdGFuY2VcclxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnZXRoZXJwYWQtY3JlYXRlLXBhZCcsXHJcbiAgICAgIG5hbWU6ICdDb252ZXJ0IGN1cnJlbnQgZG9jdW1lbnQgdG8gRXRoZXJwYWQnLFxyXG4gICAgICBlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHJcbiAgICAgICAgY29uc3Qgbm90ZSA9IHZpZXcuZmlsZTtcclxuXHJcbiAgICAgICAgaWYgKCFub3RlLm5hbWUpXHJcbiAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBub3RlX3RleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcclxuICAgICAgICBsZXQgbm90ZV90ZXh0X3dpdGhvdXRfZnJvbnRtYXR0ZXIgPSBhd2FpdCB0aGlzLmdldF90ZXh0X3dpdGhvdXRfZnJvbnRtYXR0ZXIobm90ZV90ZXh0LCBub3RlKTtcclxuXHJcbiAgICAgICAgbGV0IHBhZF9pZCA9IHRoaXMuc2V0dGluZ3MucmFuZG9tX3BhZF9pZCA/IG1ha2VpZCgxMikgOiBub3RlLmJhc2VuYW1lO1xyXG5cclxuICAgICAgICB0aGlzLmV0aGVycGFkLmNyZWF0ZVBhZCh7XHJcbiAgICAgICAgICBwYWRJRDogcGFkX2lkLFxyXG4gICAgICAgICAgdGV4dDogbm90ZV90ZXh0X3dpdGhvdXRfZnJvbnRtYXR0ZXJcclxuICAgICAgICB9LCAoZXJyb3IsIGRhdGEpPT57XHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgY3JlYXRpbmcgcGFkICR7cGFkX2lkfTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlX2Zyb250bWF0dGVyKG5vdGVfdGV4dCwgbm90ZSwge2V0aGVycGFkX2lkOiBwYWRfaWR9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2V0aGVycGFkLWdldC1wYWQnLFxyXG4gICAgICBuYW1lOiAnUmVwbGFjZSBub3RlIGNvbnRlbnQgZnJvbSBFdGhlcnBhZCcsXHJcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vdGUgPSB2aWV3LmZpbGU7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlX25vdGVfZnJvbV9ldGhlcnBhZChub3RlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdldGhlcnBhZC12aXNpdC1wYWQnLFxyXG4gICAgICBuYW1lOiAnVmlzaXQgbm90ZSBpbiBFdGhlcnBhZCBpbiBzeXN0ZW0gYnJvd3NlcicsXHJcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xyXG4gICAgICAgIGxldCBub3RlID0gdmlldy5maWxlO1xyXG4gICAgICAgIGlmICghbm90ZS5uYW1lKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgZnJvbnRtYXR0ZXIgPSB0aGlzLmdldF9mcm9udG1hdHRlcihub3RlKTtcclxuICAgICAgICBpZiAoZnJvbnRtYXR0ZXI/LmV0aGVycGFkX2lkKSB7XHJcbiAgICAgICAgICBsZXQgdXJsID0gdGhpcy5nZXRfdXJsX2Zvcl9wYWRfaWQoZnJvbnRtYXR0ZXIuZXRoZXJwYWRfaWQpO1xyXG4gICAgICAgICAgd2luZG93Lm9wZW4odXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEV0aGVycGFkU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICB9XHJcblxyXG4gIG9udW5sb2FkKCkge1xyXG5cclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICB9XHJcblxyXG4gIGdldF9mcm9udG1hdHRlcihub3RlKSB7XHJcbiAgICAvLyByZXR1cm4gYSBjb3B5XHJcbiAgICByZXR1cm4gey4uLnRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKG5vdGUpPy5mcm9udG1hdHRlcn07XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRfdGV4dF93aXRob3V0X2Zyb250bWF0dGVyKG5vdGVfdGV4dCwgbm90ZSkge1xyXG4gICAgLy9sZXQgbm90ZV90ZXh0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChub3RlKTtcclxuICAgIGxldCBmbWMgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUobm90ZSk/LmZyb250bWF0dGVyO1xyXG4gICAgaWYgKCFmbWMpIHtcclxuICAgICAgcmV0dXJuIG5vdGVfdGV4dDtcclxuICAgIH1cclxuICAgIGxldCBlbmQgPSBmbWMucG9zaXRpb24uZW5kLmxpbmUgKyAxIC8vIGFjY291bnQgZm9yIGVuZGluZyAtLS1cclxuICAgIHJldHVybiBub3RlX3RleHQuc3BsaXQoXCJcXG5cIikuc2xpY2UoZW5kKS5qb2luKFwiXFxuXCIpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlX2Zyb250bWF0dGVyKG5vdGVfdGV4dCwgbm90ZSwgZCkge1xyXG4gICAgbGV0IGZyb250bWF0dGVyID0gdGhpcy5nZXRfZnJvbnRtYXR0ZXIobm90ZSk7XHJcbiAgICBsZXQgdXBkYXRlZF9mcm9udG1hdHRlcjtcclxuICAgIGlmICghZnJvbnRtYXR0ZXIpIHtcclxuICAgICAgLy8gY3JlYXRlIG5ldyBmcm9udG1hdHRlclxyXG4gICAgICB1cGRhdGVkX2Zyb250bWF0dGVyID0gZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHVwZGF0ZWRfZnJvbnRtYXR0ZXIgPSB7XHJcbiAgICAgICAgLi4uZnJvbnRtYXR0ZXIsXHJcbiAgICAgICAgLi4uZFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgZGVsZXRlIHVwZGF0ZWRfZnJvbnRtYXR0ZXIucG9zaXRpb247XHJcbiAgICBsZXQgZnJvbnRtYXR0ZXJfdGV4dCA9IGAtLS1cXG4ke3N0cmluZ2lmeVlhbWwodXBkYXRlZF9mcm9udG1hdHRlcil9LS0tXFxuYDtcclxuICAgIC8vbGV0IG5vdGVfdGV4dCA9IGF3YWl0IHRoaXMuZ2V0X3RleHRfd2l0aG91dF9mcm9udG1hdHRlcihub3RlKTtcclxuICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShub3RlLCBmcm9udG1hdHRlcl90ZXh0ICsgbm90ZV90ZXh0KTtcclxuICB9XHJcblxyXG4gIGdldF91cmxfZm9yX3BhZF9pZChwYWRfaWQpIHtcclxuICAgIHBhZF9pZCA9IHBhZF9pZC5yZXBsYWNlKFwiIFwiLCBcIl9cIik7XHJcbiAgICByZXR1cm4gYGh0dHA6Ly8ke3RoaXMuc2V0dGluZ3MuaG9zdH06JHt0aGlzLnNldHRpbmdzLnBvcnR9L3AvJHtwYWRfaWR9YFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVwbGFjZV9ub3RlX2Zyb21fZXRoZXJwYWQobm90ZSkge1xyXG4gICAgaWYgKG5vdGUgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgbGV0IGZyb250bWF0dGVyID0gdGhpcy5nZXRfZnJvbnRtYXR0ZXIobm90ZSk7XHJcbiAgICBpZiAoIWZyb250bWF0dGVyKSByZXR1cm47XHJcbiAgICBpZiAoIWZyb250bWF0dGVyLmV0aGVycGFkX2lkKSByZXR1cm47XHJcbiAgICB0aGlzLmV0aGVycGFkLmdldEhUTUwoe3BhZElEOiBmcm9udG1hdHRlci5ldGhlcnBhZF9pZH0sIChlcnIsIGRhdGEpPT57XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImVyclwiLCBlcnIpO1xyXG4gICAgICAgIG5ldyBOb3RpY2UoXCJlcnJvcjogXCIgKyBlcnIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRlbGV0ZSBmcm9udG1hdHRlci5wb3NpdGlvbjtcclxuICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBmcm9udG1hdHRlci5ldGhlcnBhZF9nZXRfYXQgPSBub3cudG9Mb2NhbGVTdHJpbmcoKTtcclxuICAgICAgICBsZXQgZnJvbnRtYXR0ZXJfdGV4dCA9IGAtLS1cXG4ke3N0cmluZ2lmeVlhbWwoZnJvbnRtYXR0ZXIpfS0tLVxcbmA7XHJcbiAgICAgICAgbGV0IG5vdGVfaHRtbCA9IGRhdGEuaHRtbDtcclxuXHJcbiAgICAgICAgbGV0IG5vdGVfdGV4dCA9IHRkLnR1cm5kb3duKG5vdGVfaHRtbClcclxuICAgICAgICB0aGlzLmFwcC52YXVsdC5tb2RpZnkobm90ZSwgZnJvbnRtYXR0ZXJfdGV4dCArIG5vdGVfdGV4dCk7XHJcbiAgICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0X3VybF9mb3JfcGFkX2lkKGZyb250bWF0dGVyLmV0aGVycGFkX2lkKTtcclxuICAgICAgICBuZXcgTm90aWNlKGBOb3RlIHdhcyByZWxvYWRlZCBmcm9tICR7dXJsfS5cXG5Mb2NhbCBlZGl0cyB3aWxsIGJlIGRpc2NhcmRlZCFgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBFdGhlcnBhZFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICBwbHVnaW46IEV0aGVycGFkO1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFdGhlcnBhZCkge1xyXG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgY29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0V0aGVycGFkIFNldHRpbmdzJ30pO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnU2VydmVyIGhvc3QnKVxyXG4gICAgICAuc2V0RGVzYygnU2VydmVyIGhvc3QnKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2xvY2FsaG9zdCcpXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhvc3QpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9zdCA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnU2VydmVyIHBvcnQnKVxyXG4gICAgICAuc2V0RGVzYygnU2VydmVyIHBvcnQnKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzkwMDEnKVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3J0LnRvU3RyaW5nKCkpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9ydCA9IHBhcnNlSW50KHZhbHVlKTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ0FQSSBrZXknKVxyXG4gICAgICAuc2V0RGVzYygnQVBJIGtleScpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignJylcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpa2V5KVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaWtleSA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnUmFuZG9tIHBhZCBJRCcpXHJcbiAgICAgIC5zZXREZXNjKCdVc2UgYSByYW5kb20gcGFkIGlkLCBvciBjdXJyZW50IGZpbGUgbmFtZScpXHJcbiAgICAgIC5hZGRUb2dnbGUoYiA9PiBiXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJhbmRvbV9wYWRfaWQpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmFuZG9tX3BhZF9pZCA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQVFBLElBQUMsWUFBVztBQU1WLFVBQUksT0FBTztBQUdYLFVBQUkscUJB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
